(window.webpackJsonp=window.webpackJsonp||[]).push([[262],{742:function(s,t,n){"use strict";n.r(t);var a=n(19),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"difflib-对比文件差异"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#difflib-对比文件差异"}},[s._v("#")]),s._v(" difflib 对比文件差异")]),s._v(" "),n("h3",{attrs:{id:"difflib模块简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#difflib模块简介"}},[s._v("#")]),s._v(" difflib模块简介")]),s._v(" "),n("p",[s._v("difflib 作为 Python 的标准库模块，无需安装，"),n("strong",[s._v("作用是对比文本之间的差异， 且支持输出可读性比较强的 HTML 文档")]),s._v("，与 Linux 下的 diff 命令相似。程序员可 以使用 difflib 对比代码、配置文件的差别，在版本控制方面是非常有用。")]),s._v(" "),n("p",[s._v("Python 2.3 以后的版本默认自带 difflib 模块，无需额外安装。")]),s._v(" "),n("h3",{attrs:{id:"实现两个字符串的差异对比"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现两个字符串的差异对比"}},[s._v("#")]),s._v(" 实现两个字符串的差异对比")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" difflib\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义字符串 1")]),s._v("\ntext1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""text1:\nThis module provides classes and functions for comparing sequences. \nIt can be used for example, for comparing files,\nAnd can produce difference information in various formats, including HTML and \ncontext and unified diffs.\ndifflib document V7.4\nPython python\n"""')]),s._v("\ntext1_line "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" text1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("splitlines"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#以行进行分隔，以便进行对比")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义字符串 2")]),s._v("\ntext2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""text2:\nThis module provides classes and functions for comparing sequences. \nIt can be used for example, for comparing files, \nand can produce difference information in various formats, including HTML and \ncontext and unified diffs.\ndifflib document V7.3\n"""')]),s._v("\ntext2_line "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" text2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("splitlines"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nd "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" difflib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Differ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建 Differ（）对象")]),s._v("\ndiff "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compare"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("text1_line"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("text2_line"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#采用 compare 方法对字符串进行比较")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\n'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("list")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("diff"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#join 将序列中的元素以指定的字符连接生成一个新的字符串 str.join(sequence)")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("输出的结果：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" text1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n?     "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" text2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n?     "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("\n\n  This module provides classes "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" functions "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" comparing sequences"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" It can be used "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" example"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" comparing files"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" It can be used "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" example"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" comparing files"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n?                                                 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" And can produce difference information "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" various formats"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" including HTML "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" \n? "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" can produce difference information "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" various formats"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" including HTML "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" \n? "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("\n\n  context "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" unified diffs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" difflib document V7"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n?                     "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" difflib document V7"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n?                     "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Python python\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("table",[n("thead",[n("tr",[n("th",[s._v("符号")]),s._v(" "),n("th",[s._v("含义")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("‘-’")]),s._v(" "),n("td",[s._v("包含在第一个序列行中，不包含在第二个序列行中")])]),s._v(" "),n("tr",[n("td",[s._v("‘+’")]),s._v(" "),n("td",[s._v("包含在第二个序列行中，不包含在第一个序列行中")])]),s._v(" "),n("tr",[n("td",[s._v("‘  ‘")]),s._v(" "),n("td",[s._v("两个序列行一致")])]),s._v(" "),n("tr",[n("td",[s._v("‘?’")]),s._v(" "),n("td",[s._v("标志两个序列行存在增量差异")])]),s._v(" "),n("tr",[n("td",[s._v("‘^’")]),s._v(" "),n("td",[s._v("标志出两个序列存在的差异字符")])])])]),s._v(" "),n("h3",{attrs:{id:"生成美观对比html格式文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生成美观对比html格式文档"}},[s._v("#")]),s._v(" 生成美观对比HTML格式文档")]),s._v(" "),n("p",[s._v("采用 HtmlDiff()的 make_file()方法就可以生成美观的 HTML 文档，可以对上面 的例子进行些许修改，代码如下：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" difflib\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义字符串 1")]),s._v("\ntext1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""text1:\nThis module provides classes and functions for comparing sequences. \nIt can be used for example, for comparing files,\nAnd can produce difference information in various formats, including HTML and \ncontext and unified diffs.\ndifflib document V7.4\nPython python\n"""')]),s._v("\ntext1_line "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" text1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("splitlines"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#以行进行分隔，以便进行对比")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义字符串 2")]),s._v("\ntext2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""text2:\nThis module provides classes and functions for comparing sequences. \nIt can be used for example, for comparing files, \nand can produce difference information in various formats, including HTML and \ncontext and unified diffs.\ndifflib document V7.3\n"""')]),s._v("\ntext2_line "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" text2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("splitlines"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nd "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" difflib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("HtmlDiff"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建 HtmlDiff（）对象")]),s._v("\ndiff "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("make_file"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("text1_line"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("text2_line"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("diff"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ python3 diffExample2.py > diff.html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("文档包含了行号、差异标志、图例等信息，可读性更好。")]),s._v(" "),n("h3",{attrs:{id:"对比-nginx-配置文件差异"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#对比-nginx-配置文件差异"}},[s._v("#")]),s._v(" 对比 Nginx 配置文件差异")]),s._v(" "),n("p",[s._v("当维护多个 Nginx 配置时，时长会比对不同版本配置文件的差异，使运维人 员更加清晰地了解不同版本迭代后的更新项，实现的思路是读取两个需对比的配 置文件，再以换行符作为分隔符，调用 difflib.HtmlDiff()生成 HTML 格式的差异文 档。具体实现如下：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" difflib\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sys\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n \ttextfile1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("argv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n \ttextfile2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("argv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error:"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: python diffExample3.py filename1 filename2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \tsys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("readfile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n \t\tfilehandle "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'r'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \t\ttext "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" filehandle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("splitlines"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \t\tfilehandle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("close"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" text\n \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("except")]),s._v(" IOError "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Read file Error:'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \t\tsys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \t\t\ntext1_lines "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" readfile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("textfile1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntext2_lines "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" readfile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("textfile2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nd "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" difflib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("HtmlDiff"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("make_file"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("text1_lines"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("text2_lines"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[s._v("新建文件，命名为 diffExample3.py，同时将 Nginx 两个配置文件放在同一目 录下，运行命令如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ python3 diffExample3.py nginx.conf.v1 nginx.conf.v2 > diff.html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("然后将 diff.html 用浏览器打开，可以看到两个文件的差异.")])])}),[],!1,null,null,null);t.default=e.exports}}]);