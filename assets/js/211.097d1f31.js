(window.webpackJsonp=window.webpackJsonp||[]).push([[211],{691:function(s,a,t){"use strict";t.r(a);var n=t(19),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"报错解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#报错解决方案"}},[s._v("#")]),s._v(" 报错解决方案")]),s._v(" "),t("h3",{attrs:{id:"一-报错dashboard的仪表盘崩了"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-报错dashboard的仪表盘崩了"}},[s._v("#")]),s._v(" 一.报错dashboard的仪表盘崩了")]),s._v(" "),t("ul",[t("li",[t("h4",{attrs:{id:"解决-更改dashboard的local-settings配置文件并重启httpd和memcached-刷新后可正常登陆。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决-更改dashboard的local-settings配置文件并重启httpd和memcached-刷新后可正常登陆。"}},[s._v("#")]),s._v(" "),t("strong",[s._v("解决:更改dashboard的local_settings配置文件并重启httpd和memcached，刷新后可正常登陆。")])])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@openstack ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/openstack-dashboard/local_settings ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#SESSION_ENGINE = 'django.contrib.sessions.backends.cache'")]),s._v("\nSESSION_ENGINE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.sessions.backends.file'")]),s._v("\nCACHES "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BACKEND'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.core.cache.backends.memcached.MemcachedCache'")]),s._v(",\n         "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'LOCATION'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'openstack:11211'")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@openstack ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl restart httpd memcached   ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"二、horizon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、horizon"}},[s._v("#")]),s._v(" 二、Horizon")]),s._v(" "),t("p",[t("strong",[s._v("1、Horizon cookie 配置")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("修改 /usr/share/openstack-dashboard/openstack_dashboard/settings.py 文件:\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vi /usr/share/openstack-dashboard/openstack_dashboard/settings.py")]),s._v("\nSESSION_ENGINE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.sessions.backends.signed_cookies'")]),s._v("\nSESSION_COOKIE_HTTPONLY "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" True\nSESSION_EXPIRE_AT_BROWSER_CLOSE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" False\nSESSION_COOKIE_SECURE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" False\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#SESSION_TIMEOUT = 1800    #注释这里")]),s._v("\nSESSION_COOKIE_AGE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这样cookie就能保存一段时间，而不必每次浏览器重开，都要重新输入用户、密码。")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl restart httpd memcached")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"三、nova"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、nova"}},[s._v("#")]),s._v(" 三、Nova")]),s._v(" "),t("p",[t("strong",[s._v("1、易失性存储文件系统")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("修改 /etc/nova/nova.conf\n\n[DEFAULT]\ndefault_ephemeral_format = ext3 # ext4 xfs\n#这样就可以指定 ephemeral disk 的默认文件系统了。\n\n[root@controller ~]# systemctl restart openstack-nova-compute \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[t("strong",[s._v("2.OpenStack计算节点重启后恢复")])]),s._v(" "),t("p",[s._v("计算节点断电意外重启后，nova-compute 服务无法启动，查看日志信息，报错 如下：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("20b8b6c4e48a08508349b69dbef0f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("instance: d3a92cf7-9852-47a9-add3-ba18e837a15a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Ensuring static filters \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v("-11-20 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":14:17.295 ERROR nova.compute.manager \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("req-21c31ead-a8a1-4681-b83e-ad3f16e83267 13a448c8f1fa4d1792b69b48e88fb8be ceb20b8b6c4e48a08508349b69dbef0f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("instance: d3a92cf7-9852-47a9-add3-ba18e837a15a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Cannot "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v(" instance: \nUnable to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" bridge qbred607b93-2f port taped607b93-2f: Invalid argument\n\n这个是 nova-compute.log 中的错误，\n我们再查看：tail -f /var/log/openvswitch/ovs-brcompatd.log 日志信息：\n从日志可以看到，是由于 bridge 上无法创建 tap 了，提示该 tap 已经存在，这是\nopenvswitch 中的一个 BUG。\n\n解决方法：\n删除该 port：Ovs-vsctl del-port tap12b631ca-40\n然后我们再启动虚拟机，可以看到虚拟机能够成功启动了。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);