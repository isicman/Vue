(window.webpackJsonp=window.webpackJsonp||[]).push([[271],{751:function(s,a,t){"use strict";t.r(a);var n=t(19),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"openstack性能优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#openstack性能优化"}},[s._v("#")]),s._v(" OpenStack性能优化")]),s._v(" "),t("h2",{attrs:{id:"【题目1】heat编排-1分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#【题目1】heat编排-1分"}},[s._v("#")]),s._v(" 【题目1】Heat编排[1分]")]),s._v(" "),t("p",[s._v("在自行搭建的OpenStack私有云平台上，在/root目录下编写Heat模板heat-image.yaml，编写模板内容通过使用swift外部存储方式创建镜像heat-image，限制镜像最低磁盘使用为20G，最低内存使用为2G。完成后提交控制节点的用户名、密码和IP地址到答题框。（在提交信息前请准备好yaml模板执行的环境）")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"【题目2】i-o调度-1分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#【题目2】i-o调度-1分"}},[s._v("#")]),s._v(" 【题目2】I/O调度[1分]")]),s._v(" "),t("p",[s._v("使用自行搭建的OpenStack私有云平台，优化KVM的I/O调度算法，将默认的模式修改为none模式。配置完成后提交控制节点的用户名、密码和IP地址到答题框。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat  /sys/block/vda/queue/scheduler")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mq-deadline"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" kyber none\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo none > /sys/block/vda/queue/scheduler")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat  /sys/block/vda/queue/scheduler")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" mq-deadline kyber\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"【题目3】镜像开放-1分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#【题目3】镜像开放-1分"}},[s._v("#")]),s._v(" 【题目3】镜像开放[1分]")]),s._v(" "),t("p",[s._v("使用自行搭建的OpenStack私有云平台。使用提供的cirros-0.3.4-x86_64-disk.img镜像文件（镜像文件在提供的HTTP服务中）在admin项目中创建名为glance-cirros的镜像，通过命令将glance-cirros镜像指定demo项目可以进行共享使用。配置完成后提交controller控制节点的用户名、密码和IP地址到答题框。")]),s._v(" "),t("p",[s._v("权限配置：")]),s._v(" "),t("ol",[t("li",[s._v("首先将镜像共享给A租户，命令格式为"),t("code",[s._v("glance member-create")])]),s._v(" "),t("li",[s._v("在共享之后，镜像的状态是"),t("code",[s._v("pending")]),s._v("状态，此时还需要激活镜像")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# glance image-create --name glance-cirros --disk-format qcow2 --container-format bare --file cirros-")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v(".4-x86_64-disk.img\nroot@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# openstack project create --domain demo deyA")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# openstack user create --domain demo --password 123456 userA")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# openstack role add --project deyA --user userA user")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# glance member-create ecfddc58-efc0-40a8-9a62-8bca26cabc44  a0fdea89afb94b98b011613de71dca3b")]),s._v("\n+--------------------------------------+----------------------------------+---------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Image ID                             "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Member ID                        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Status  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------------------------+----------------------------------+---------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ecfddc58-efc0-40a8-9a62-8bca26cabc44 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a0fdea89afb94b98b011613de71dca3b "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" pending "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------------------------+----------------------------------+---------+\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# glance member-update ecfddc58-efc0-40a8-9a62-8bca26cabc44  a0fdea89afb94b98b011613de71dca3b accepted")]),s._v("\n+--------------------------------------+----------------------------------+----------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Image ID                             "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Member ID                        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Status   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------------------------+----------------------------------+----------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ecfddc58-efc0-40a8-9a62-8bca26cabc44 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a0fdea89afb94b98b011613de71dca3b "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" accepted "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------------------------+----------------------------------+----------+\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h2",{attrs:{id:"【题目4】nova启动策略-1分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#【题目4】nova启动策略-1分"}},[s._v("#")]),s._v(" 【题目4】Nova启动策略[1分]")]),s._v(" "),t("p",[s._v("在平时使用OpenStack平台的时候，当同时启动大量虚拟机时，会出现排队现象，导致虚拟机启动超时从而获取不到IP地址而报错失败，请使用自行搭建的OpenStack平台。修改nova相关配置文件，使虚拟机可以在启动完成后获取IP地址，不会因为超时而报错。配置完成后提交controller点的用户名、密码和IP地址到答题框。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vi /etc/nova/nova.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#vif_plugging_is_fatal=true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将该行的注释去掉，并将true改为false，修改完之后如下：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vif_plugging_is_fatal")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# openstack-service restart")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"【题目5】cinder加密-1分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#【题目5】cinder加密-1分"}},[s._v("#")]),s._v(" 【题目5】Cinder加密[1分]")]),s._v(" "),t("p",[s._v("使用自行创建的OpenStack云计算平台，通过相关配置，开启Cinder块存储的数据加密功能，然后创建加密卷类型luks，并配置卷类型luks使用带有512位密钥，Cipher使用aes-xts-plain64，Control Location使用front-end，Provider使用nova.volume.encryptors.luks.LuksEncryptor，最后分别创建两个大小为1G的云硬盘，一个是普通云硬盘，另一个使用加密卷类型。配置完成后提交controller控制节点的用户名、密码和IP地址到答题框。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/nova/nova.conf | grep -Ev '^$|^#' | grep api_class")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("api_class")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nova.keymgr.conf_key_mgr.ConfKeyManager\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/cinder/cinder.conf | grep -Ev '^$|^#' | grep api_class")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("api_class")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cinder.keymgr.conf_key_mgr.ConfKeyManager\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#systemctl restart openstack-nova-compute")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#systemctl restart openstack-cinder-volume")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xiandian ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cinder type-create luks")]),s._v("\n+--------------------------------------+------+-------------+-----------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  ID                  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Description "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Is_Public "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------------------------+------+-------------+-----------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a45d8fdf-0f4b-41d8-89f0-f08d8d8cc868 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" luks "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      -      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    True   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------------------------+------+-------------+-----------+\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xiandian ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cinder encryption-type-create --cipher aes-xts-plain64 --key_size 512 --control_location front-end luks nova.volume.encryptors.luks.LuksEncryptor")]),s._v("\n+--------------------------------------+-------------------------------------------+-----------------+----------+------------------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            Volume Type ID            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  Provider                 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      Cipher     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Key Size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Control Location "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------------------------+-------------------------------------------+-----------------+----------+------------------+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" a45d8fdf-0f4b-41d8-89f0-f08d8d8cc868 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" nova.volume.encryptors.luks.LuksEncryptor "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" aes-xts-plain64 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    front-end     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+--------------------------------------+-------------------------------------------+-----------------+----------+------------------+\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xiandian ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cinder create --name unencrypted 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xiandian ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cinder create --name encrypted --volume-type luks 1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h2",{attrs:{id:"【题目6】linux句柄优化-1分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#【题目6】linux句柄优化-1分"}},[s._v("#")]),s._v(" 【题目6】Linux句柄优化[1分]")]),s._v(" "),t("p",[s._v("修改Linux系统的句柄数限制，在生产环境中，系统默认的1024远远不够，会导致系统报“too many open files”的错误。使用ulimit命令临时生效，修改句柄限制为65535。")]),s._v(" "),t("p",[s._v("添加配置的解释如下：")]),s._v(" "),t("p",[s._v("● "),t("code",[s._v("*")]),s._v("：代表所有用户。")]),s._v(" "),t("p",[s._v("● "),t("code",[s._v("soft")]),s._v("：超过文件句柄数时，仅提示。")]),s._v(" "),t("p",[s._v("● "),t("code",[s._v("hard")]),s._v("：超过文件句柄数时，直接限制。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "* soft nofile 65535" >> /etc/security/limits.conf')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "* hard nofile 65535" >> /etc/security/limits.conf')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# logout")]),s._v("\nConnection closed.\n\nLast login: Tue Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" 01:58:31 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.70\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ulimit -n")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"【题目7】平台调度策略优化-1分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#【题目7】平台调度策略优化-1分"}},[s._v("#")]),s._v(" 【题目7】平台调度策略优化[1分]")]),s._v(" "),t("p",[s._v("在创建虚机过程中，Nova-compute会调用wait_for_instance_event函数（nova/compute/manage.py）进行network-vif-plugged的事件等待。在Nova-compute配置文件中有两个与该事件相关的参数- "),t("code",[s._v("vif_plugging_timeout")]),s._v("、"),t("code",[s._v("vif_plugging_if_fatal")]),s._v("，前者是等待事件的最大时间，后者是处理超时异常的方式。")]),s._v(" "),t("p",[s._v("修改/etc/nova/nova.conf配置文件：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vi /etc/nova/nova.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#vif_plugging_is_fatal=true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将该行的注释去掉，并将true改为false，修改完之后如下：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vif_plugging_is_fatal")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# openstack-service restart")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"【题目8】平台镜像优化-1分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#【题目8】平台镜像优化-1分"}},[s._v("#")]),s._v(" 【题目8】平台镜像优化[1分]")]),s._v(" "),t("p",[s._v("使用提供的镜像CentOS7.5-compress.qcow2，下载至controller节点的/root目录下，查看镜像的大小，对镜像进行压缩。qemu-img命令中提供一个可用于镜像转换与压缩的选项，即qemu-img convert。接下来使用该命令，对已经打快照完成的镜像进行压缩操作。")]),s._v(" "),t("p",[s._v("命令参数的解释如下：")]),s._v(" "),t("p",[s._v("● "),t("code",[s._v("-c")]),s._v("：压缩。")]),s._v(" "),t("p",[s._v("● "),t("code",[s._v("-O qcow2")]),s._v("：输出格式为 qcow2。")]),s._v(" "),t("p",[s._v("● "),t("code",[s._v("CentOS7.5-compress.qcow2")]),s._v("：被压缩的文件。")]),s._v(" "),t("p",[s._v("● "),t("code",[s._v("CentOS7.5-compress2.qcow2")]),s._v("：压缩完成后文件。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sh CentOS7.5-compress.qcow2")]),s._v("\n892M  CentOS7.5-compress.qcow2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# qemu-img convert -c -O qcow2 CentOS7.5-compress.qcow2 CentOS7.5-compress2.qcow2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sh CentOS7.5-compress2.qcow2 ")]),s._v("\n405M  CentOS7.5-compress2.qcow2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);