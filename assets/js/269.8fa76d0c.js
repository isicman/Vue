(window.webpackJsonp=window.webpackJsonp||[]).push([[269],{749:function(s,a,t){"use strict";t.r(a);var n=t(19),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"openstack-queen脚本填充"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#openstack-queen脚本填充"}},[s._v("#")]),s._v(" OpenStack Queen脚本填充")]),s._v(" "),t("h3",{attrs:{id:"iaas-pre-hosts-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-pre-hosts-sh"}},[s._v("#")]),s._v(" "),t("strong",[s._v("iaas-pre-hosts.sh")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("36")]),s._v("行的代码，补齐安装的软件")])]),s._v(" "),t("li",[t("strong",[s._v("填充"),t("code",[s._v("83")]),s._v("行的代码，补齐时间同步chrony代码")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-pre-host.sh")]),s._v("\n\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装openstack必要组件如python的openstack客户端、openstack安全组件、openstack工具、ini>    编辑器、交互式编辑语言")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("  -y python-openstackclient openstack-selinux openstack-utils crudini "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expect")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v("\n\n\n\n\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#chrony  添加时间同步的脚本  ")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y chrony\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("85")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HOST_NAME")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("86")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3,6s/^/#/g'")]),s._v(" /etc/chrony.conf\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("87")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'7s/^/server controller iburst/g'")]),s._v(" /etc/chrony.conf\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("88")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"allow '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$network_segment_IP")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/chrony.conf\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("89")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local stratum 10"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/chrony.conf\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3,6s/^/#/g'")]),s._v(" /etc/chrony.conf\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("92")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'7s/^/server controller iburst/g'")]),s._v(" /etc/chrony.conf\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("93")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("94")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("95")]),s._v(" systemctl restart chronyd\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),s._v(" systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" chronyd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-mysql-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-mysql-sh"}},[s._v("#")]),s._v(" iaas-install-mysql.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("45")]),s._v("行的代码，创建rabbitmq的用户以及授权")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-mysql.sh")]),s._v("\n\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用rabbitmqctl命令添加rabbitmq的用户，并配置用户的权限为所有权限")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),s._v(" rabbitmqctl add_user "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RABBIT_USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RABBIT_PASS")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("46")]),s._v(" rabbitmqctl set_permissions "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RABBIT_USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('".*"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('".*"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('".*"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-keystone-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-keystone-sh"}},[s._v("#")]),s._v(" iaas-install-keystone.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("35")]),s._v("行的代码，创建admin的用户设置密码")])]),s._v(" "),t("li",[t("strong",[s._v("填充"),t("code",[s._v("37")]),s._v("行的代码，创建admin的角色")])]),s._v(" "),t("li",[t("strong",[s._v("填充"),t("code",[s._v("38")]),s._v("行的代码，将admin用户赋予admin的角色")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-keystone.sh")]),s._v("\n\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建admin用户并设置密码")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(" penstack user create --domain "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DOMAIN_NAME")]),s._v(" --password "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ADMIN_PASS")]),s._v(" admin\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建admin的角色")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("38")]),s._v(" openstack role create admin\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将admin用户赋予admin的角色")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v(" openstack role "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --project admin --user admin admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-glance-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-glance-sh"}},[s._v("#")]),s._v(" iaas-install-glance.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("34")]),s._v("行的代码，设置允许的存储类型为file和http")])]),s._v(" "),t("li",[t("strong",[s._v("填充"),t("code",[s._v("36")]),s._v("行的代码，设置默认存储为file")])]),s._v(" "),t("li",[t("strong",[s._v("填充"),t("code",[s._v("38")]),s._v("行的代码，设置默存储的路径为/var/lib/glance/images/")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-glance.sh")]),s._v("\n \n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置glance-api配置文件，设置允许的存储类型为file和http")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(" crudini --set /etc/glance/glance-api.conf glance_store stores file,http\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置glance-api配置文件，设置默认存储类型是file")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(" crudini --set /etc/glance/glance-api.conf glance_store default_store  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置glance-api配置文件，设置默认存储路径为/var/lib/glance/images/")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("38")]),s._v(" crudini --set /etc/glance/glance-api.conf glance_store filesystem_store_datadir /var/lib    /glance/images/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-nova-controller-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-nova-controller-sh"}},[s._v("#")]),s._v(" iaas-install-nova-controller.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("89")]),s._v("行的代码，同步nova的api数据库")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-nova-controller.sh")]),s._v("\n\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("88")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同步nova的api数据库")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("89")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" -s /bin/sh -c "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nova-manage api_db sync"')]),s._v(" nova\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-nova-compute-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-nova-compute-sh"}},[s._v("#")]),s._v(" iaas-install-nova-compute.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("46")]),s._v("行的代码，设置虚拟化类型为qemu")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-nova-compute.sh")]),s._v("\n\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置nova服务的配置文件，修改虚拟化类型为qemu")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("46")]),s._v("         crudini --set /etc/nova/nova.conf libvirt virt_type  qemu\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-neutron-controller-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-neutron-controller-sh"}},[s._v("#")]),s._v(" iaas-install-neutron-controller.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("112")]),s._v("行的代码，设创建软连接")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-neutron-controller.sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("111")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在/etc/neutron/下创建ml2_conf.ini的软连接文件plugin.ini")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("112")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-neutron-compute-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-neutron-compute-sh"}},[s._v("#")]),s._v(" iaas-install-neutron-compute.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("33")]),s._v("行的代码，修改physical_interface_mappings为第二块网卡名")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-neutron-compute.sh")]),s._v("\n \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置linuxbridge_agent.ini文件，修改physical_interface_mappings为第二块网卡名")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v(" crudini --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini linux_bridge physical_interface_mappings  provider:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$INTERFACE_NAME")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-dashboard-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-dashboard-sh"}},[s._v("#")]),s._v(" iaas-install-dashboard.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("6")]),s._v("行的代码，安装dashboard组件")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-dashboard.sh")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装dashboard组件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openstack-dashboard -y\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-cinder-controller-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-cinder-controller-sh"}},[s._v("#")]),s._v(" iaas-install-cinder-controller.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("44")]),s._v("行的代码，导入cinder的数据库")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-cinder-controller.sh")]),s._v("\n \n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 导入cinder数据库")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" -s /bin/sh -c "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cinder-manage db sync"')]),s._v(" cinder\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-cinder-compute-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-cinder-compute-sh"}},[s._v("#")]),s._v(" iaas-install-cinder-compute.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("8")]),s._v("行的代码，创建物理卷")])]),s._v(" "),t("li",[t("strong",[s._v("填充"),t("code",[s._v("10")]),s._v("行的代码，创建卷组")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-cinder-compute.sh")]),s._v("\n \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建物理卷")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" pvcreate -f /dev/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BLOCK_DISK")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建卷组")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" vgcreate cinder-volumes /dev/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BLOCK_DISK")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-swift-controller-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-swift-controller-sh"}},[s._v("#")]),s._v(" iaas-install-swift-controller.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("9")]),s._v("行的代码，创建swift的服务")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-swift-controller.sh")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建openstack服务swift")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" oppenstack "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" create --name swift --description "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OpenStack Object Storage"')]),s._v(" object-store\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-swift-compute-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-swift-compute-sh"}},[s._v("#")]),s._v(" iaas-install-swift-compute.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("144")]),s._v("行的代码，配置文件的属组")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-swift-compute.sh ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("143")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置/swift/node及下面目录与文件的属组")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("144")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R swift:swift /swift/node\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"iaas-install-heat-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iaas-install-heat-sh"}},[s._v("#")]),s._v(" iaas-install-heat.sh")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("填充"),t("code",[s._v("28")]),s._v("行的代码，配置heat服务和rabbitmq的服务连接")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@controller ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat iaas-install-heat.sh ")]),s._v("\n\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置heat服务与rabbitmq服务的连接")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" crudini --set /etc/heat/heat.conf DEFAULT transport_url rabbit://"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RABBIT_USER")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RABBIT_PASS")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HOST_NAME")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);