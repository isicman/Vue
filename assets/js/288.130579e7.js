(window.webpackJsonp=window.webpackJsonp||[]).push([[288],{768:function(s,a,t){"use strict";t.r(a);var n=t(19),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"kubeeasy部署文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubeeasy部署文档"}},[s._v("#")]),s._v(" Kubeeasy部署文档")]),s._v(" "),t("h3",{attrs:{id:"版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#版本"}},[s._v("#")]),s._v(" 版本")]),s._v(" "),t("p",[s._v("版本：kubeeasy-v1.3.0")]),s._v(" "),t("h3",{attrs:{id:"更新说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新说明"}},[s._v("#")]),s._v(" 更新说明：")]),s._v(" "),t("ol",[t("li",[s._v("新增安装软件包并发执行任务")]),s._v(" "),t("li",[s._v("新增私有容器registry仓库，用于集群拉取镜像")]),s._v(" "),t("li",[s._v("修改容器镜像的操作")]),s._v(" "),t("li",[s._v("取消在线安装的模式，全部替换为离线安装")])]),s._v(" "),t("h3",{attrs:{id:"架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[s._v("#")]),s._v(" 架构")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/isicman/image/main/img/202205080017651.png",alt:"kube-vip1"}})]),s._v(" "),t("h3",{attrs:{id:"要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#要求"}},[s._v("#")]),s._v(" 要求")]),s._v(" "),t("p",[s._v("OS："),t("code",[s._v("centos 7.9 x64")])]),s._v(" "),t("p",[s._v("CPU："),t("code",[s._v("2C及以上")])]),s._v(" "),t("p",[s._v("MEM："),t("code",[s._v("4G及以上")])]),s._v(" "),t("p",[s._v("认证：集群节点需"),t("strong",[s._v("统一认证")]),s._v("，需使用同一用户名和密码")]),s._v(" "),t("p",[s._v("运行：在预设的master节点执行")]),s._v(" "),t("h3",{attrs:{id:"功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[s._v("#")]),s._v(" 功能")]),s._v(" "),t("ul",[t("li",[s._v("支持升级集群内核，升级后内核版本为：5.13.2")]),s._v(" "),t("li",[s._v("支持离线部署普通的k8s集群，k8s版本为：v1.21.3")]),s._v(" "),t("li",[s._v("支持离线部署高可用k8s集群，k8s版本为：v1.21.3")]),s._v(" "),t("li",[s._v("K8S HA集群使用云原生的kube-vip，其自带VIP和负载均衡")]),s._v(" "),t("li",[s._v("K8S集群默认安装图形化管理工具kuboard-v2")]),s._v(" "),t("li",[s._v("K8S集群默认安装local-hostpath存储类")]),s._v(" "),t("li",[s._v("K8S证书100年，且开启了自动轮询")]),s._v(" "),t("li",[s._v("内置容器镜像的功能：pull、push、save、load")])]),s._v(" "),t("p",[s._v("普通集群模式主机列表")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("strong",[s._v("IP")]),s._v(" "),t("strong",[s._v("地址")])]),s._v(" "),t("th",[t("strong",[s._v("主机名")])]),s._v(" "),t("th",[t("strong",[s._v("角色")])])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("192.168.1.6")]),s._v(" "),t("td",[s._v("k8s-maste-noder01")]),s._v(" "),t("td",[s._v("master | etcd | worker")])]),s._v(" "),t("tr",[t("td",[s._v("192.168.1.15")]),s._v(" "),t("td",[s._v("k8s-worker-node1")]),s._v(" "),t("td",[s._v("worker")])]),s._v(" "),t("tr",[t("td",[s._v("192.168.1.9")]),s._v(" "),t("td",[s._v("k8s-worker-node2")]),s._v(" "),t("td",[s._v("worker")])])])]),s._v(" "),t("h3",{attrs:{id:"离线安装方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#离线安装方式"}},[s._v("#")]),s._v(" 离线安装方式")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("注意")]),s._v("：离线部署方式的主机必须配置网关")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master-1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1991876")]),s._v("\ndr-xr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v(" Mar  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 01:27 dependencies\n-r-xr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("615853603")]),s._v(" Mar  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 01:27 harbor-offline.tar.gz\n-r-xr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13862382")]),s._v(" Mar  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 01:27 helm-v3.7.1-linux-amd64.tar.gz\n-r-xr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21963328")]),s._v(" Mar  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 01:27 istio.tar.gz\n-r-xr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("155976")]),s._v(" Mar  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 01:27 kubeeasy\n-r-xr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1367636693")]),s._v(" Mar  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 01:27 kubernetes.tar.gz\n-r-xr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20196005")]),s._v(" Mar  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 01:27 kubevirt.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h4",{attrs:{id:"🚀安装kubeeasy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀安装kubeeasy"}},[s._v("#")]),s._v(" 🚀安装kubeeasy")]),s._v(" "),t("p",[s._v("将kubeeasy文件上传至预设的master节点/root目录，然后赋予执行权限并移动到/usr/bin目录下。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master-1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv kubeeasy /usr/bin/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"🚀集群安装依赖包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀集群安装依赖包"}},[s._v("#")]),s._v(" 🚀集群安装依赖包")]),s._v(" "),t("p",[s._v("使用kubeeasy在集群中安装软件包，包含远程连接sshpass等软件包。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master-1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy  install dependencies \\")]),s._v("\n --host "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.6,192.168.1.15 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --password 000000 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --offline-file dependencies/base-rpms.tar.gz \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"🚀基础ssh配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀基础ssh配置"}},[s._v("#")]),s._v(" 🚀基础ssh配置")]),s._v(" "),t("p",[s._v("使用kubeeasy在集群中创建ssh免秘钥，其中优化的ssh的连接以及配置了集群的免秘钥登录等。")]),s._v(" "),t("ul",[t("li",[s._v("集群连通性检测-ssh")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy check "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --host "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.6,192.168.1.15 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("集群免秘钥设置")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy create ssh-keygen "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --master "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.6 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --worker "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.15 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"🚀集群升级内核"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀集群升级内核"}},[s._v("#")]),s._v(" 🚀集群升级内核")]),s._v(" "),t("p",[s._v("使用kubeeasy升级集群的内核，将其3.10的内核升级为5.14（建议升级内核）。脚本执行完后，会自动重启主机，以生效系统内核。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master-1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy install upgrade-kernel  \\")]),s._v("\n --host "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.6,192.168.1.15 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --password 000000 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --offline-file dependencies/base-rpms.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"🚀部署k8s集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀部署k8s集群"}},[s._v("#")]),s._v(" 🚀部署K8S集群")]),s._v(" "),t("p",[s._v("使用kubeeasy部署K8S集群，以下分为"),t("strong",[s._v("普通集群")]),s._v("和"),t("strong",[s._v("高可用集群")]),s._v("的安装方式，根据实际情况选择一种方案部署。安装后的K8S的版本为v1.21.3，使用docker作为容器运行时，网络组件使用calico网络，默认还安装kuboard图形化管理器和K8S存储类（local-hostpath），K8S的证书有效期为100年，且开启了证书轮换.")]),s._v(" "),t("blockquote",[t("p",[s._v("如需更改K8S的Pod网段，修改--pod-cidr参数相应的值")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master-1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy install kubernetes \\")]),s._v("\n --master  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.6 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --worker "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.15 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --password 000000 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.21")]),s._v(".1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --offline-file kubernetes.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("部署完成后重新登录刷新。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\n\n  ██╗  ██╗ █████╗ ███████╗\n  ██║ ██╔╝██╔══██╗██╔════╝\n  █████╔╝ ╚█████╔╝███████╗\n  ██╔═██╗ ██╔══██╗╚════██║\n  ██║  ██╗╚█████╔╝███████║\n  ╚═╝  ╚═╝ ╚════╝ ╚══════╝ \n\n Information as of: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-03-03 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":13:10\n\n Product"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(": OpenStack Compute "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.0")]),s._v(".10-1.el7\n OS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".: CentOS Linux release "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.9")]),s._v(".2009 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Core"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n Kernel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".: Linux "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-1160.el7.x86_64 x86_64 GNU/Linux\n CPU"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(": Intel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("R"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Core"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i5-4590 CPU @ "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".30GHz 4P 1C 4L\n\n Hostname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".: k8s-master-node1\n IP Addresses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.18\n\n Uptime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" days, 00h 17m 42s\n Memory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".71GiB of "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".64GiB RAM used "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22.42")]),s._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n Load Averages"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.31")]),s._v(" / "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.52")]),s._v(" / "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.32")]),s._v(" with "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" core"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3298")]),s._v(".088Hz\n Disk Usage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".: 13G of 100G disk space used "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n Users online"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n Running Processes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("189")]),s._v("\n Container Info"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".: Exited:2 Running:12 Images:26\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("blockquote",[t("p",[s._v("安装高可用k8s集群（master节点个数必须大于等于3）")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" kubernetes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --master "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.206,192.168.1.207,192.168.1.208 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --worker "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.209 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.21")]),s._v(".3 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --virtual-ip "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.250 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --pod-cidr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.0/16 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --offline-file kubernetes.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h4",{attrs:{id:"🚀部署harbor仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀部署harbor仓库"}},[s._v("#")]),s._v(" 🚀部署Harbor仓库")]),s._v(" "),t("p",[s._v("使用kubeeasy部署Harbor仓库，使用kubeeasy add的方式添加harbor-offline.tar.gz完成部署。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy add \\")]),s._v("\n--registry harbor "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--offline-file harbor-offline.tar.gz \n\n✔ ----Harbor has been installed and started successfully.----\nCreated symlink from /etc/systemd/system/multi-user.target.wants/harbor.service to /usr/lib/systemd/system/harbor.service.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"🚀部署istio服务网格"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀部署istio服务网格"}},[s._v("#")]),s._v(" 🚀部署Istio服务网格")]),s._v(" "),t("p",[s._v("使用kubeeasy部署istio服务网格。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy add \\")]),s._v("\n--istio istio "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--offline-file istio.tar.gz \n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n istio-system ")]),s._v("\nNAME                                   READY   STATUS    RESTARTS   AGE\ngrafana-6ccd56f4b6-b5f2r               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          49s\nistio-egressgateway-7f4864f59c-qmlgg   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          65s\nistio-ingressgateway-55d9fb9f-6kd2x    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          65s\nistiod-555d47cb65-s8xsg                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          69s\njaeger-5d44bc5c5d-ndgss                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          49s\nkiali-9f9596d69-mdbzb                  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          49s\nprometheus-64fd8ccd65-w9n65            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          48s\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h4",{attrs:{id:"🚀部署kubevirt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀部署kubevirt"}},[s._v("#")]),s._v(" 🚀部署kubevirt")]),s._v(" "),t("p",[s._v("使用kubeeasy部署kubrvirt的虚拟机服务，用于管理k8s的虚拟机。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy add \\")]),s._v("\n--virt kubevirt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--offline-file kubevirt.tar.gz \n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n kubevirt ")]),s._v("\nNAME                              READY   STATUS    RESTARTS   AGE\nvirt-api-86f9d6d4f-mj6qx          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m6s\nvirt-api-86f9d6d4f-xm9j2          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m6s\nvirt-controller-54b79f5db-6x2dd   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m41s\nvirt-controller-54b79f5db-mwd86   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m41s\nvirt-handler-t7c7k                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m41s\nvirt-handler-tkqxl                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m41s\nvirt-handler-wfgnj                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m41s\nvirt-operator-6fbd74566c-k9wxq    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m47s\nvirt-operator-6fbd74566c-ntxf9    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          8m47s\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"其他功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他功能"}},[s._v("#")]),s._v(" 其他功能")]),s._v(" "),t("h4",{attrs:{id:"🚀-重置k8s节点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀-重置k8s节点"}},[s._v("#")]),s._v(" 🚀 重置K8S节点")]),s._v(" "),t("p",[s._v("使用kubeeasy将集群重置（意思就是删除所有相关软件，恢复一个纯净的系统）")]),s._v(" "),t("ul",[t("li",[s._v("重置正常的K8S集群（会重置整个集群）")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy reset "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("强制重置指定的节点（如果节点不正常可以选择强制重置节点）")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy reset --force "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --master "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.6 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --worker "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.15 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"🚀增加k8s节点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀增加k8s节点"}},[s._v("#")]),s._v(" 🚀增加K8S节点")]),s._v(" "),t("p",[s._v("使用kubeeasy将新的节点加入K8S集群中")]),s._v(" "),t("ul",[t("li",[s._v("离线增加K8S节点")])]),s._v(" "),t("blockquote",[t("p",[s._v("增加master节点只适用于高可用集群的模式")]),s._v(" "),t("p",[s._v("从普通的K8S集群转换为高可用的K8S集群")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy install dependencies \\")]),s._v("\n--host "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.9 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--password 000000 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--offline-file dependencies/base-rpms.tar.gz \n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy add \\")]),s._v("\n--worker "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.9 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--password 000000 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--offline-file kubernetes.tar.gz \n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get  node ")]),s._v("\nNAME               STATUS   ROLES                         AGE     VERSION\nk8s-master-node1   Ready    control-plane,master,worker   8m21s   v1.21.1\nk8s-worker-node1   Ready    worker                        7m56s   v1.21.1\nk8s-worker-node2   Ready    worker                        15s     v1.21.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h4",{attrs:{id:"🚀删除k8s节点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀删除k8s节点"}},[s._v("#")]),s._v(" 🚀删除K8S节点")]),s._v(" "),t("p",[s._v("使用kubeeasy将节点从K8S集群中删除")]),s._v(" "),t("ul",[t("li",[s._v("删除K8S节点")])]),s._v(" "),t("blockquote",[t("p",[s._v("删除操作会重置节点，包括删除K8S服务、docker数据等清空操作。")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy delete \\")]),s._v("\n--worker "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.9 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--password 000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"🚀移除k8s节点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀移除k8s节点"}},[s._v("#")]),s._v(" 🚀移除K8S节点")]),s._v(" "),t("p",[s._v("使用kubeeasy将节点从K8S集群中移除")]),s._v(" "),t("ul",[t("li",[s._v("移除K8S节点")])]),s._v(" "),t("blockquote",[t("p",[s._v("移除操作会不会重置节点，只是从K8S集群中移除，并不会删除docker的数据。")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy remove \\")]),s._v("\n--worker "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.9 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--password 0000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"🚀集群分发并读取容器镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀集群分发并读取容器镜像"}},[s._v("#")]),s._v(" 🚀集群分发并读取容器镜像")]),s._v(" "),t("p",[s._v("使用kubeeasy将容器镜像离线包分发到指定节点并读取，如test-images.tar.gz。")]),s._v(" "),t("ul",[t("li",[s._v("分发现有的容器镜像并读取")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy images load \\")]),s._v("\n  --host "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.6,192.168.1.15,192.168.1.9 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --offline-file test-images.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"🚀容器镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀容器镜像"}},[s._v("#")]),s._v(" 🚀容器镜像")]),s._v(" "),t("p",[s._v("使用kubeeasy将容器列表文件的镜像保存到指定目录、也可以将其上传到镜像仓库中，但前提是您需要先登录镜像仓库。")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://gitee.com/iskongyu/files/raw/main/other/images-list.txt",target:"_blank",rel:"noopener noreferrer"}},[s._v("images-list.txt"),t("OutboundLink")],1),s._v("文件命名规范：")]),s._v(" "),t("p",[s._v("test ：表示一个镜像包集，下方区域是镜像列表，保存后以test命名。")]),s._v(" "),t("ul",[t("li",[s._v("保存镜像离线包")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeeasy images save \\")]),s._v("\n  --images-file images-list.txt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --images-dir ./images\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("推送镜像到仓库")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master-node1 opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker login dockerhub.kubeeasy.local:5000 -u admin -p admin")]),s._v("\nkubeeasy images push "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --images-file images-list.txt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --images-registry dockerhub.kubeeasy.local:5000/kongyu\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),t("h4",{attrs:{id:"🚀集群免秘钥设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀集群免秘钥设置"}},[s._v("#")]),s._v(" 🚀集群免秘钥设置")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy create ssh-keygen "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --master "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".200.11 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --worker "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".200.12,192.168.200.13 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"🚀集群时间同步设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀集群时间同步设置"}},[s._v("#")]),s._v(" 🚀集群时间同步设置")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy create "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --master "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.207 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --worker "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.208,192.168.1.209 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"🚀集群连通性检测-ssh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀集群连通性检测-ssh"}},[s._v("#")]),s._v(" 🚀集群连通性检测-ssh")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy check "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --host "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.207-192.168.1.209 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"🚀集群连通性检测-ping"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀集群连通性检测-ping"}},[s._v("#")]),s._v(" 🚀集群连通性检测-ping")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy check "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --host "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.207-192.168.1.209\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"🚀修改集群root密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀修改集群root密码"}},[s._v("#")]),s._v(" 🚀修改集群root密码")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy create password "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --host "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.207-192.168.1.209 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --new-password "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"🚀清除历史命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🚀清除历史命令"}},[s._v("#")]),s._v(" 🚀清除历史命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeeasy "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --host "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.207-192.168.1.209 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --user root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --password 000000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);