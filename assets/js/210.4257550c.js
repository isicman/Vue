(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{690:function(t,a,s){"use strict";s.r(a);var e=s(19),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"heat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#heat"}},[t._v("#")]),t._v(" Heat")]),t._v(" "),s("p",[s("code",[t._v("Heat是 OpenStack 提供的自动编排功能的组件，基于描述性的模板，来编排复合云应用程序。")]),t._v("Heat 采用了模板方式来设计或者定义编排，为方便用户使用，Heat 还提供了大量的模板例子，使用户能够方便地得到想要的编排。")]),t._v(" "),s("h3",{attrs:{id:"一、简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、简介"}},[t._v("#")]),t._v(" 一、简介")]),t._v(" "),s("p",[s("strong",[t._v("什么Heat")])]),t._v(" "),s("ul",[s("li",[t._v("Heat 是一套业务流程平台，旨在帮助用户更轻松地配置以 OpenStack 为基础的云体系。利用Heat应用程序，开发人员能够在程序中使用模板以实现资源的自动化部署。Heat能够启动应用、创建虚拟机并自动处理整个流程。它还拥有出色的跨平台兼容性，能够与 Amazon Web Services 业务流程平台 CloudFormation 相对接——这意味着用户完全可以将 AWS 模板引入 OpenStack 环境当中。")])]),t._v(" "),s("p",[s("strong",[t._v("为什么需要Heat")])]),t._v(" "),s("ul",[s("li",[t._v("更快更有效的管理 OpenStack 的资源：云平台系统在相对比较稳定的情况下，管理成本逐渐变成首要的解决问题。云上自动化能力是一个云平台的刚需，可以有效降低维护难度。Heat 采用了模板方式来设计或者定义编排，为方便用户使用，Heat 还提供了大量的模板例子，使用户能够方便地得到想要的编排。")]),t._v(" "),s("li",[t._v("更小的研发成本：引入 Heat，对于不了解 OpenStack 的研发者来说，可以更快的接入现有的业务系统。开发者更关心的是授权认证和对虚拟资源的增删改，而对于底层的状态并不用太多了解。")])]),t._v(" "),s("h3",{attrs:{id:"二、概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、概念"}},[t._v("#")]),t._v(" 二、概念")]),t._v(" "),s("p",[s("code",[t._v("堆栈（stack）")]),t._v("：管理资源的集合。单个模板中定义的实例化资源的集合，是 Heat 管理应用程序的逻辑单元，往往对应一个应用程序。")]),t._v(" "),s("p",[s("code",[t._v("模板（template）")]),t._v("：如何使用代码定义和描述堆栈。描述了所有组件资源以及组件资源之间的关系，是 Heat 的核心。")]),t._v(" "),s("p",[s("code",[t._v("资源（resource）")]),t._v("：将在编排期间创建或修改的对象。资源可以是网络、路由器、子网、实例、卷、浮动IP、安全组等。")]),t._v(" "),s("p",[s("code",[t._v("参数（parameters）")]),t._v("：heat模板中的顶级key，定义在创建或更新 stack 时可以传递哪些数据来定制模板。")]),t._v(" "),s("p",[s("code",[t._v("参数组（parameter_groups）")]),t._v("：用于指定如何对输入参数进行分组，以及提供参数的顺序。")]),t._v(" "),s("p",[s("code",[t._v("输出（outputs）")]),t._v("：heat模板中的顶级key，定义实例化后 stack 将返回的数据。")]),t._v(" "),s("h3",{attrs:{id:"三、架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、架构"}},[t._v("#")]),t._v(" 三、架构")]),t._v(" "),s("p",[s("strong",[t._v("核心架构")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("heat command-line client：")]),t._v("CLI通过与 heat-api 通信，来调用 API 实现相关功能。终端开发者可以直接使用编排 REST API。")]),t._v(" "),s("li",[s("code",[t._v("heat-api：")]),t._v("实现 OpenStack 原生支持的 REST API。该组件通过把 API 请求经由 AMQP 传送给 Heat engine 来处理 API 请求。")]),t._v(" "),s("li",[s("code",[t._v("heat-api-cfn：")]),t._v("提供与 AWS CloudFormation 兼容的、AWS 风格的查询 API，处理请求并通过 AMQP 将它们发送到 heat-engine。")]),t._v(" "),s("li",[s("code",[t._v("heat-engine：")]),t._v("执行模板内容，最终完成应用系统的创建和部署，并把执行结果返回给 API 调用者。")]),t._v(" "),s("li",[s("code",[t._v("heat-cfntools：")]),t._v("完成虚拟机实例内部的操作配置任务，需要单独下载。")])]),t._v(" "),s("p",[s("strong",[t._v("工作流程")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("用户在 Horizon 中或者命令行中提交包含模板和参数输入的请求")])]),t._v(" "),s("li",[s("code",[t._v("Horizon 或者命令行工具会将接收到的请求转化为 REST 格式的 API 调用 Heat-api 或者是 Heat-api-cfn。")])]),t._v(" "),s("li",[s("code",[t._v("Heat-api 和 Heat-api-cfn 会验证模板的正确性，然后通过 AMQP 异步传递给 Heat Engine 来处理请求。")])]),t._v(" "),s("li",[s("code",[t._v("Heat Engine 接收到请求后，会把请求解析为各种类型的资源，每种资源都对应 OpenStack 其它的服务客户端，然后通过发送 REST 的请求给其它服务。")])]),t._v(" "),s("li",[s("code",[t._v("Heat Engine 在这里的作用分为三层： 第一层处理 Heat 层面的请求，就是根据模板和输入参数来创建 Stack，这里的 Stack 是由各种资源组合而成。 第二层解析 Stack 里各种资源的依赖关系，Stack 和嵌套 Stack 的关系。第三层就是根据解析出来的关系，依次调用各种服务客户段来创建各种资源。")])])]),t._v(" "),s("h3",{attrs:{id:"四、yaml的基本语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、yaml的基本语法"}},[t._v("#")]),t._v(" "),s("strong",[t._v("四、Yaml的基本语法")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("大小写敏感")])]),t._v(" "),s("li",[s("p",[t._v("使用缩进表示层级关系")])]),t._v(" "),s("li",[s("p",[t._v("缩进不允许使用tab，只允许空格")])]),t._v(" "),s("li",[s("p",[t._v("缩进的空格数不重要，只要相同层级的元素左对齐即可")])]),t._v(" "),s("li",[s("p",[t._v("‘#’表示注释")])])]),t._v(" "),s("p",[s("strong",[t._v("数据类型")])]),t._v(" "),s("p",[t._v("YAML 支持以下几种数据类型：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("对象：键值对的集合，又称为映射（mapping）/ 哈希（hashes） / 字典（dictionary）")])]),t._v(" "),s("li",[s("p",[t._v("数组：一组按次序排列的值，又称为序列（sequence） / 列表（list）")])]),t._v(" "),s("li",[s("p",[t._v("纯量（scalars）：单个的、不可再分的值")])])]),t._v(" "),s("p",[s("strong",[t._v("YAML 对象")])]),t._v(" "),s("p",[t._v("对象键值对使用冒号结构表示 "),s("strong",[t._v("key: value")]),t._v("，冒号后面要加一个空格。")]),t._v(" "),s("p",[t._v("也可以使用 "),s("strong",[t._v("key:{key1: value1, key2: value2, …}")]),t._v("。")]),t._v(" "),s("p",[t._v("还可以使用缩进表示层级关系；")]),t._v(" "),s("h3",{attrs:{id:"五、模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、模板"}},[t._v("#")]),t._v(" 五、模板")]),t._v(" "),s("p",[s("strong",[t._v("概念：Heat 模板全称为heat orchestration template，简称为HOT。")])]),t._v(" "),s("h3",{attrs:{id:"flavor的heat模板详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flavor的heat模板详解"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Flavor的heat模板详解")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("编写Heat模板create_flavor.yaml")])]),t._v(" "),s("li",[s("strong",[t._v("创建名为“m1.flavor”")])]),t._v(" "),s("li",[s("strong",[t._v("ID 为 1234、内存为1024MB")])]),t._v(" "),s("li",[s("strong",[t._v("硬盘为20GB、vcpu数量为 1的云主机类型")])])]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@controller ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi create_flaovr.yaml                              ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("heat_template_version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("2014-10-16")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nova_flavor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" OS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Nova"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Flavor\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" m1.flavor\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("disk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ram")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("vcpus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("flavorid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[s("strong",[t._v("执行yaml文件")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@controller ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# heat stack-create  mystack  -f create_flaovr.yaml  ")]),t._v("\nWARNING "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shell"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"heat stack-create"')]),t._v(" is deprecated, please use "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"openstack stack create"')]),t._v(" instead\nWARNING "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shell"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"heat stack-list"')]),t._v(" is deprecated, please use "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"openstack stack list"')]),t._v(" instead\n+--------------------------------------+------------+--------------------+----------------------+--------------+----------------------------------+\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v("                                   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" stack_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" stack_status       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" creation_time        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" updated_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" project                          "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+--------------------------------------+------------+--------------------+----------------------+--------------+----------------------------------+\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" 878da6fe-ad70-41a9-9ee2-492b9b319c24 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" mystack    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" CREATE_IN_PROGRESS "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-10-02T08:33:23Z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" None         "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" 246ec13db06d40519a1815067897ced2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+--------------------------------------+------------+--------------------+----------------------+--------------+----------------------------------+\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"cinder的heat模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cinder的heat模板"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Cinder的heat模板")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("编写Heat模板create_volume.yaml")])]),t._v(" "),s("li",[s("strong",[t._v("创建名为“block”")])]),t._v(" "),s("li",[s("strong",[t._v("磁盘大小10G")])])]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@controller ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi create_volume.yaml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("heat_template_version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("2014-10-16")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("my_new_volume")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" OS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Cinder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Volume\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" block\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@controller ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# heat stack-create  mystack  -f create_volume.yaml")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h3",{attrs:{id:"network的heat模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#network的heat模板"}},[t._v("#")]),t._v(" Network的heat模板")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("编写Heat模板create_net.yam")])]),t._v(" "),s("li",[s("strong",[t._v("创建名为Heat-Network网络，选择不共享；")])]),t._v(" "),s("li",[s("strong",[t._v("创建子网名为Heat-Subnet，子网网段设置为10.20.2.0/24，")])]),t._v(" "),s("li",[s("strong",[t._v("开启DHCP服务，地址池为10.20.2.20-10.20.2.100。")])])]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@controller ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi create_net.yaml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("heat_template_version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("2014-10-16")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("network_1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" OS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Neutron"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Net\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("admin_state_up")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Heat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Network\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shared")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("subnet_1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" OS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Neutron"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Subnet\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("allocation_pools")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10.20.2.100\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10.20.2.10\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cidr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10.20.2.0/24\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enable_dhcp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host_routes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Heat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Subnet\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("network_id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("get_resource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" network_1\n        \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@controller ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# heat stack-create  mystack  -f create_net.yaml")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("h3",{attrs:{id:"keystone的heat模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keystone的heat模板"}},[t._v("#")]),t._v(" Keystone的heat模板")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("编写Heat模板create_user.yaml")])]),t._v(" "),s("li",[s("strong",[t._v("创建名为heat-user的用户，属于admin项目包，")])]),t._v(" "),s("li",[s("strong",[t._v("并赋予heat-user用户admin的权限，配置用户密码为123456。")])])]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@controller ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi create_user.yaml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("heat_template_version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("2014-10-16")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" OS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Keystone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("User\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" heat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("user\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("domain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" demo\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("default_project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" admin\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("roles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" admin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v('"project"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" admin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@controller ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# heat stack-create  mystack  -f create_user.yaml")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);