<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Manila组件</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/Vue/img/avatar.png">
    <meta name="description" content="暂且为空">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/Vue/assets/css/0.styles.0779c551.css" as="style"><link rel="preload" href="/Vue/assets/js/app.2f1a3b6e.js" as="script"><link rel="preload" href="/Vue/assets/js/2.3b495877.js" as="script"><link rel="preload" href="/Vue/assets/js/3.0279f92a.js" as="script"><link rel="preload" href="/Vue/assets/js/214.226476f0.js" as="script"><link rel="preload" href="/Vue/assets/js/4.cb69b0f7.js" as="script"><link rel="prefetch" href="/Vue/assets/js/10.c275bb5d.js"><link rel="prefetch" href="/Vue/assets/js/100.3bb1b0e4.js"><link rel="prefetch" href="/Vue/assets/js/101.a01d59f4.js"><link rel="prefetch" href="/Vue/assets/js/102.f419e012.js"><link rel="prefetch" href="/Vue/assets/js/103.bd5f9634.js"><link rel="prefetch" href="/Vue/assets/js/104.ed16bff2.js"><link rel="prefetch" href="/Vue/assets/js/105.8d8a884a.js"><link rel="prefetch" href="/Vue/assets/js/106.aa743e85.js"><link rel="prefetch" href="/Vue/assets/js/107.cf714f94.js"><link rel="prefetch" href="/Vue/assets/js/108.e6ec757c.js"><link rel="prefetch" href="/Vue/assets/js/109.24cd0706.js"><link rel="prefetch" href="/Vue/assets/js/11.af7952aa.js"><link rel="prefetch" href="/Vue/assets/js/110.b601f694.js"><link rel="prefetch" href="/Vue/assets/js/111.bddaa63e.js"><link rel="prefetch" href="/Vue/assets/js/112.9737407e.js"><link rel="prefetch" href="/Vue/assets/js/113.182a72b9.js"><link rel="prefetch" href="/Vue/assets/js/114.88e3528a.js"><link rel="prefetch" href="/Vue/assets/js/115.e6fb1e07.js"><link rel="prefetch" href="/Vue/assets/js/116.05edf9a6.js"><link rel="prefetch" href="/Vue/assets/js/117.3488639c.js"><link rel="prefetch" href="/Vue/assets/js/118.cb030e7c.js"><link rel="prefetch" href="/Vue/assets/js/119.36ed2122.js"><link rel="prefetch" href="/Vue/assets/js/12.a3654490.js"><link rel="prefetch" href="/Vue/assets/js/120.78f37852.js"><link rel="prefetch" href="/Vue/assets/js/121.33f9f917.js"><link rel="prefetch" href="/Vue/assets/js/122.db28c031.js"><link rel="prefetch" href="/Vue/assets/js/123.fae41aaa.js"><link rel="prefetch" href="/Vue/assets/js/124.6014ee0f.js"><link rel="prefetch" href="/Vue/assets/js/125.048d7ee9.js"><link rel="prefetch" href="/Vue/assets/js/126.79671cb1.js"><link rel="prefetch" href="/Vue/assets/js/127.b607fed5.js"><link rel="prefetch" href="/Vue/assets/js/128.6a5a1980.js"><link rel="prefetch" href="/Vue/assets/js/129.6bc2af6c.js"><link rel="prefetch" href="/Vue/assets/js/13.91a93260.js"><link rel="prefetch" href="/Vue/assets/js/130.31dc0318.js"><link rel="prefetch" href="/Vue/assets/js/131.1f4ef5a2.js"><link rel="prefetch" href="/Vue/assets/js/132.aad55f7b.js"><link rel="prefetch" href="/Vue/assets/js/133.850511a4.js"><link rel="prefetch" href="/Vue/assets/js/134.0f6b070c.js"><link rel="prefetch" href="/Vue/assets/js/135.ee7fea35.js"><link rel="prefetch" href="/Vue/assets/js/136.a46039e3.js"><link rel="prefetch" href="/Vue/assets/js/137.1c7ebf24.js"><link rel="prefetch" href="/Vue/assets/js/138.6a80ffa9.js"><link rel="prefetch" href="/Vue/assets/js/139.f958f7b4.js"><link rel="prefetch" href="/Vue/assets/js/14.58c9ae82.js"><link rel="prefetch" href="/Vue/assets/js/140.d1e73936.js"><link rel="prefetch" href="/Vue/assets/js/141.a9897e5f.js"><link rel="prefetch" href="/Vue/assets/js/142.2b20335e.js"><link rel="prefetch" href="/Vue/assets/js/143.4e6e434c.js"><link rel="prefetch" href="/Vue/assets/js/144.5910990e.js"><link rel="prefetch" href="/Vue/assets/js/145.5c556359.js"><link rel="prefetch" href="/Vue/assets/js/146.86e27014.js"><link rel="prefetch" href="/Vue/assets/js/147.6c4a48cf.js"><link rel="prefetch" href="/Vue/assets/js/148.86e97474.js"><link rel="prefetch" href="/Vue/assets/js/149.c2f69712.js"><link rel="prefetch" href="/Vue/assets/js/15.2ff73105.js"><link rel="prefetch" href="/Vue/assets/js/150.33cf046e.js"><link rel="prefetch" href="/Vue/assets/js/151.5e66e299.js"><link rel="prefetch" href="/Vue/assets/js/152.e56f28bb.js"><link rel="prefetch" href="/Vue/assets/js/153.ad838120.js"><link rel="prefetch" href="/Vue/assets/js/154.9cabe557.js"><link rel="prefetch" href="/Vue/assets/js/155.7fc9c59f.js"><link rel="prefetch" href="/Vue/assets/js/156.99beb2dc.js"><link rel="prefetch" href="/Vue/assets/js/157.2f6f138c.js"><link rel="prefetch" href="/Vue/assets/js/158.c2ebfe13.js"><link rel="prefetch" href="/Vue/assets/js/159.ecad0f76.js"><link rel="prefetch" href="/Vue/assets/js/16.afec3afd.js"><link rel="prefetch" href="/Vue/assets/js/160.a0c44de2.js"><link rel="prefetch" href="/Vue/assets/js/161.a02953aa.js"><link rel="prefetch" href="/Vue/assets/js/162.da6c21cd.js"><link rel="prefetch" href="/Vue/assets/js/163.ccd82bba.js"><link rel="prefetch" href="/Vue/assets/js/164.a5b2d27c.js"><link rel="prefetch" href="/Vue/assets/js/165.6306c9da.js"><link rel="prefetch" href="/Vue/assets/js/166.d30a40d2.js"><link rel="prefetch" href="/Vue/assets/js/167.576fbdd9.js"><link rel="prefetch" href="/Vue/assets/js/168.5132f3f2.js"><link rel="prefetch" href="/Vue/assets/js/169.4f7b6bda.js"><link rel="prefetch" href="/Vue/assets/js/17.cb0083c7.js"><link rel="prefetch" href="/Vue/assets/js/170.73f50e6b.js"><link rel="prefetch" href="/Vue/assets/js/171.0691ff72.js"><link rel="prefetch" href="/Vue/assets/js/172.5b3bffba.js"><link rel="prefetch" href="/Vue/assets/js/173.a821c842.js"><link rel="prefetch" href="/Vue/assets/js/174.c7954299.js"><link rel="prefetch" href="/Vue/assets/js/175.431864a2.js"><link rel="prefetch" href="/Vue/assets/js/176.d22b5dfb.js"><link rel="prefetch" href="/Vue/assets/js/177.b278b962.js"><link rel="prefetch" href="/Vue/assets/js/178.07cf1514.js"><link rel="prefetch" href="/Vue/assets/js/179.c3273c2d.js"><link rel="prefetch" href="/Vue/assets/js/18.a09885e4.js"><link rel="prefetch" href="/Vue/assets/js/180.77ca26cf.js"><link rel="prefetch" href="/Vue/assets/js/181.788e42a1.js"><link rel="prefetch" href="/Vue/assets/js/182.8e7519e7.js"><link rel="prefetch" href="/Vue/assets/js/183.e54e78ae.js"><link rel="prefetch" href="/Vue/assets/js/184.22debe4b.js"><link rel="prefetch" href="/Vue/assets/js/185.e76ccf85.js"><link rel="prefetch" href="/Vue/assets/js/186.df4cb6e8.js"><link rel="prefetch" href="/Vue/assets/js/187.41fb453e.js"><link rel="prefetch" href="/Vue/assets/js/188.5bca0a92.js"><link rel="prefetch" href="/Vue/assets/js/189.3133bb55.js"><link rel="prefetch" href="/Vue/assets/js/19.13e3db6d.js"><link rel="prefetch" href="/Vue/assets/js/190.0b203720.js"><link rel="prefetch" href="/Vue/assets/js/191.ae34cdeb.js"><link rel="prefetch" href="/Vue/assets/js/192.c6b8de66.js"><link rel="prefetch" href="/Vue/assets/js/193.5350de54.js"><link rel="prefetch" href="/Vue/assets/js/194.9dc316f3.js"><link rel="prefetch" href="/Vue/assets/js/195.371cebb0.js"><link rel="prefetch" href="/Vue/assets/js/196.1164784c.js"><link rel="prefetch" href="/Vue/assets/js/197.824319f1.js"><link rel="prefetch" href="/Vue/assets/js/198.60a7beb3.js"><link rel="prefetch" href="/Vue/assets/js/199.5bcefde2.js"><link rel="prefetch" href="/Vue/assets/js/20.73bf2d20.js"><link rel="prefetch" href="/Vue/assets/js/200.b47e15ba.js"><link rel="prefetch" href="/Vue/assets/js/201.956ec86b.js"><link rel="prefetch" href="/Vue/assets/js/202.8a272715.js"><link rel="prefetch" href="/Vue/assets/js/203.0f429f03.js"><link rel="prefetch" href="/Vue/assets/js/204.278ee080.js"><link rel="prefetch" href="/Vue/assets/js/205.83c0fe12.js"><link rel="prefetch" href="/Vue/assets/js/206.ffdc349c.js"><link rel="prefetch" href="/Vue/assets/js/207.f165bca5.js"><link rel="prefetch" href="/Vue/assets/js/208.6991b2ef.js"><link rel="prefetch" href="/Vue/assets/js/209.c0418849.js"><link rel="prefetch" href="/Vue/assets/js/21.0a96b638.js"><link rel="prefetch" href="/Vue/assets/js/210.4257550c.js"><link rel="prefetch" href="/Vue/assets/js/211.097d1f31.js"><link rel="prefetch" href="/Vue/assets/js/212.ea96e672.js"><link rel="prefetch" href="/Vue/assets/js/213.2b921d6b.js"><link rel="prefetch" href="/Vue/assets/js/215.3a320e63.js"><link rel="prefetch" href="/Vue/assets/js/216.1388e227.js"><link rel="prefetch" href="/Vue/assets/js/217.050bf527.js"><link rel="prefetch" href="/Vue/assets/js/218.95ee0100.js"><link rel="prefetch" href="/Vue/assets/js/219.acef3d57.js"><link rel="prefetch" href="/Vue/assets/js/22.97c5162c.js"><link rel="prefetch" href="/Vue/assets/js/220.1b2dda0a.js"><link rel="prefetch" href="/Vue/assets/js/221.4505e1c5.js"><link rel="prefetch" href="/Vue/assets/js/222.340ecf8b.js"><link rel="prefetch" href="/Vue/assets/js/223.2acba7c0.js"><link rel="prefetch" href="/Vue/assets/js/224.563b0345.js"><link rel="prefetch" href="/Vue/assets/js/225.f573a8b0.js"><link rel="prefetch" href="/Vue/assets/js/226.bd1a73fe.js"><link rel="prefetch" href="/Vue/assets/js/227.23a589e3.js"><link rel="prefetch" href="/Vue/assets/js/228.6f344c78.js"><link rel="prefetch" href="/Vue/assets/js/229.0c1a78af.js"><link rel="prefetch" href="/Vue/assets/js/23.e42d5b5a.js"><link rel="prefetch" href="/Vue/assets/js/230.e412a305.js"><link rel="prefetch" href="/Vue/assets/js/231.108982c3.js"><link rel="prefetch" href="/Vue/assets/js/232.07986abe.js"><link rel="prefetch" href="/Vue/assets/js/233.61b390cc.js"><link rel="prefetch" href="/Vue/assets/js/234.e1e030d7.js"><link rel="prefetch" href="/Vue/assets/js/235.be0057c0.js"><link rel="prefetch" href="/Vue/assets/js/236.e2722a7c.js"><link rel="prefetch" href="/Vue/assets/js/237.18291d84.js"><link rel="prefetch" href="/Vue/assets/js/238.ec2188b5.js"><link rel="prefetch" href="/Vue/assets/js/239.1629749f.js"><link rel="prefetch" href="/Vue/assets/js/24.7a7fd1e0.js"><link rel="prefetch" href="/Vue/assets/js/240.f1cf9e57.js"><link rel="prefetch" href="/Vue/assets/js/241.55e170d7.js"><link rel="prefetch" href="/Vue/assets/js/242.b7b6b401.js"><link rel="prefetch" href="/Vue/assets/js/243.bb7906d0.js"><link rel="prefetch" href="/Vue/assets/js/244.5ed9a466.js"><link rel="prefetch" href="/Vue/assets/js/245.464ebcaa.js"><link rel="prefetch" href="/Vue/assets/js/246.b49672d3.js"><link rel="prefetch" href="/Vue/assets/js/247.9a55ab30.js"><link rel="prefetch" href="/Vue/assets/js/248.815ea9fd.js"><link rel="prefetch" href="/Vue/assets/js/249.e8dfafa3.js"><link rel="prefetch" href="/Vue/assets/js/25.f17c8641.js"><link rel="prefetch" href="/Vue/assets/js/250.9762a60e.js"><link rel="prefetch" href="/Vue/assets/js/251.92a204a2.js"><link rel="prefetch" href="/Vue/assets/js/252.ec8bcce5.js"><link rel="prefetch" href="/Vue/assets/js/253.180604ac.js"><link rel="prefetch" href="/Vue/assets/js/254.73c69216.js"><link rel="prefetch" href="/Vue/assets/js/255.ee3e1d58.js"><link rel="prefetch" href="/Vue/assets/js/256.8f2376e7.js"><link rel="prefetch" href="/Vue/assets/js/257.6b40ed57.js"><link rel="prefetch" href="/Vue/assets/js/258.cbda5405.js"><link rel="prefetch" href="/Vue/assets/js/259.4afaab82.js"><link rel="prefetch" href="/Vue/assets/js/26.d01eec21.js"><link rel="prefetch" href="/Vue/assets/js/260.223291dd.js"><link rel="prefetch" href="/Vue/assets/js/261.66b7cee0.js"><link rel="prefetch" href="/Vue/assets/js/262.7646537d.js"><link rel="prefetch" href="/Vue/assets/js/263.2102a21b.js"><link rel="prefetch" href="/Vue/assets/js/264.01f69d37.js"><link rel="prefetch" href="/Vue/assets/js/265.3ac8cba8.js"><link rel="prefetch" href="/Vue/assets/js/266.a6a4a04d.js"><link rel="prefetch" href="/Vue/assets/js/267.be57cedf.js"><link rel="prefetch" href="/Vue/assets/js/268.27ea675e.js"><link rel="prefetch" href="/Vue/assets/js/269.8fa76d0c.js"><link rel="prefetch" href="/Vue/assets/js/27.82945f33.js"><link rel="prefetch" href="/Vue/assets/js/270.2c92fb60.js"><link rel="prefetch" href="/Vue/assets/js/271.905fd143.js"><link rel="prefetch" href="/Vue/assets/js/272.eebdf848.js"><link rel="prefetch" href="/Vue/assets/js/273.f02e16f4.js"><link rel="prefetch" href="/Vue/assets/js/274.1bb4b532.js"><link rel="prefetch" href="/Vue/assets/js/275.dd5ea9d3.js"><link rel="prefetch" href="/Vue/assets/js/276.74d6f8ab.js"><link rel="prefetch" href="/Vue/assets/js/277.b5b213b1.js"><link rel="prefetch" href="/Vue/assets/js/278.5e706d6b.js"><link rel="prefetch" href="/Vue/assets/js/279.1489f169.js"><link rel="prefetch" href="/Vue/assets/js/28.4c76df2a.js"><link rel="prefetch" href="/Vue/assets/js/280.19a374ee.js"><link rel="prefetch" href="/Vue/assets/js/281.d65b3987.js"><link rel="prefetch" href="/Vue/assets/js/282.5a6e3624.js"><link rel="prefetch" href="/Vue/assets/js/283.e7c54b99.js"><link rel="prefetch" href="/Vue/assets/js/284.5d480289.js"><link rel="prefetch" href="/Vue/assets/js/285.44c27c32.js"><link rel="prefetch" href="/Vue/assets/js/286.1b8d0289.js"><link rel="prefetch" href="/Vue/assets/js/287.96b027f9.js"><link rel="prefetch" href="/Vue/assets/js/288.130579e7.js"><link rel="prefetch" href="/Vue/assets/js/289.f4187c09.js"><link rel="prefetch" href="/Vue/assets/js/29.6e068a06.js"><link rel="prefetch" href="/Vue/assets/js/290.4c49c46b.js"><link rel="prefetch" href="/Vue/assets/js/291.193647db.js"><link rel="prefetch" href="/Vue/assets/js/292.7268e373.js"><link rel="prefetch" href="/Vue/assets/js/293.bcfefa9e.js"><link rel="prefetch" href="/Vue/assets/js/294.54f6a432.js"><link rel="prefetch" href="/Vue/assets/js/295.5020e3e7.js"><link rel="prefetch" href="/Vue/assets/js/296.d7f32e58.js"><link rel="prefetch" href="/Vue/assets/js/297.5dbbaabe.js"><link rel="prefetch" href="/Vue/assets/js/298.e6bf1a42.js"><link rel="prefetch" href="/Vue/assets/js/299.a18d8ba7.js"><link rel="prefetch" href="/Vue/assets/js/30.b168baee.js"><link rel="prefetch" href="/Vue/assets/js/300.ba217ef5.js"><link rel="prefetch" href="/Vue/assets/js/301.f96a76f5.js"><link rel="prefetch" href="/Vue/assets/js/302.37e0b19e.js"><link rel="prefetch" href="/Vue/assets/js/303.031b4c8e.js"><link rel="prefetch" href="/Vue/assets/js/304.d96cbd8b.js"><link rel="prefetch" href="/Vue/assets/js/305.0dcf6344.js"><link rel="prefetch" href="/Vue/assets/js/306.4f2540d0.js"><link rel="prefetch" href="/Vue/assets/js/31.dad269c9.js"><link rel="prefetch" href="/Vue/assets/js/32.63b50b54.js"><link rel="prefetch" href="/Vue/assets/js/33.04949d86.js"><link rel="prefetch" href="/Vue/assets/js/34.56a89946.js"><link rel="prefetch" href="/Vue/assets/js/35.3390f24b.js"><link rel="prefetch" href="/Vue/assets/js/36.14595b6f.js"><link rel="prefetch" href="/Vue/assets/js/37.8fcd4835.js"><link rel="prefetch" href="/Vue/assets/js/38.1825c8e2.js"><link rel="prefetch" href="/Vue/assets/js/39.b4ada2b6.js"><link rel="prefetch" href="/Vue/assets/js/40.c296d94a.js"><link rel="prefetch" href="/Vue/assets/js/41.283d95eb.js"><link rel="prefetch" href="/Vue/assets/js/42.0c1e2947.js"><link rel="prefetch" href="/Vue/assets/js/43.c6d0bcee.js"><link rel="prefetch" href="/Vue/assets/js/44.3287d646.js"><link rel="prefetch" href="/Vue/assets/js/45.1953ece5.js"><link rel="prefetch" href="/Vue/assets/js/46.a3b47dce.js"><link rel="prefetch" href="/Vue/assets/js/47.cf352360.js"><link rel="prefetch" href="/Vue/assets/js/48.d0f63d8e.js"><link rel="prefetch" href="/Vue/assets/js/49.4badb8d1.js"><link rel="prefetch" href="/Vue/assets/js/5.cacfa1e9.js"><link rel="prefetch" href="/Vue/assets/js/50.746e8eac.js"><link rel="prefetch" href="/Vue/assets/js/51.d56d5dbd.js"><link rel="prefetch" href="/Vue/assets/js/52.904cb343.js"><link rel="prefetch" href="/Vue/assets/js/53.e38427ab.js"><link rel="prefetch" href="/Vue/assets/js/54.b6de4473.js"><link rel="prefetch" href="/Vue/assets/js/55.f44277d0.js"><link rel="prefetch" href="/Vue/assets/js/56.9e836496.js"><link rel="prefetch" href="/Vue/assets/js/57.a7060cfa.js"><link rel="prefetch" href="/Vue/assets/js/58.5456c39a.js"><link rel="prefetch" href="/Vue/assets/js/59.3a2b2cea.js"><link rel="prefetch" href="/Vue/assets/js/6.f3d12b31.js"><link rel="prefetch" href="/Vue/assets/js/60.eb928d20.js"><link rel="prefetch" href="/Vue/assets/js/61.c1088d2f.js"><link rel="prefetch" href="/Vue/assets/js/62.218b1f1d.js"><link rel="prefetch" href="/Vue/assets/js/63.56adb0a3.js"><link rel="prefetch" href="/Vue/assets/js/64.842a8d1d.js"><link rel="prefetch" href="/Vue/assets/js/65.98d7a270.js"><link rel="prefetch" href="/Vue/assets/js/66.790ad0f2.js"><link rel="prefetch" href="/Vue/assets/js/67.f6effd5a.js"><link rel="prefetch" href="/Vue/assets/js/68.ca8c791c.js"><link rel="prefetch" href="/Vue/assets/js/69.da7fff1e.js"><link rel="prefetch" href="/Vue/assets/js/7.3e38d37d.js"><link rel="prefetch" href="/Vue/assets/js/70.26a7c3b0.js"><link rel="prefetch" href="/Vue/assets/js/71.1dd70f74.js"><link rel="prefetch" href="/Vue/assets/js/72.39679f64.js"><link rel="prefetch" href="/Vue/assets/js/73.40083b3a.js"><link rel="prefetch" href="/Vue/assets/js/74.b1ae5f8c.js"><link rel="prefetch" href="/Vue/assets/js/75.b45e9fa4.js"><link rel="prefetch" href="/Vue/assets/js/76.481e860c.js"><link rel="prefetch" href="/Vue/assets/js/77.526130d4.js"><link rel="prefetch" href="/Vue/assets/js/78.37c9e1a0.js"><link rel="prefetch" href="/Vue/assets/js/79.7d94e648.js"><link rel="prefetch" href="/Vue/assets/js/8.d3983478.js"><link rel="prefetch" href="/Vue/assets/js/80.785428df.js"><link rel="prefetch" href="/Vue/assets/js/81.107f320e.js"><link rel="prefetch" href="/Vue/assets/js/82.7520706d.js"><link rel="prefetch" href="/Vue/assets/js/83.e41657b3.js"><link rel="prefetch" href="/Vue/assets/js/84.140eb152.js"><link rel="prefetch" href="/Vue/assets/js/85.e8ca4166.js"><link rel="prefetch" href="/Vue/assets/js/86.cb2900cf.js"><link rel="prefetch" href="/Vue/assets/js/87.ff517a5f.js"><link rel="prefetch" href="/Vue/assets/js/88.adce3afb.js"><link rel="prefetch" href="/Vue/assets/js/89.bd97fe2f.js"><link rel="prefetch" href="/Vue/assets/js/9.06b0b5b8.js"><link rel="prefetch" href="/Vue/assets/js/90.19e9e85c.js"><link rel="prefetch" href="/Vue/assets/js/91.4331efbd.js"><link rel="prefetch" href="/Vue/assets/js/92.5001ecee.js"><link rel="prefetch" href="/Vue/assets/js/93.15ec5fef.js"><link rel="prefetch" href="/Vue/assets/js/94.f8c699ca.js"><link rel="prefetch" href="/Vue/assets/js/95.ff89b1f4.js"><link rel="prefetch" href="/Vue/assets/js/96.9b0780fa.js"><link rel="prefetch" href="/Vue/assets/js/97.e2092ef8.js"><link rel="prefetch" href="/Vue/assets/js/98.9e9ca302.js"><link rel="prefetch" href="/Vue/assets/js/99.badd2c8a.js">
    <link rel="stylesheet" href="/Vue/assets/css/0.styles.0779c551.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Vue/" class="home-link router-link-active"><img src="/Vue/img/logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Vue/" class="nav-link">🐱首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐳容器" class="dropdown-title"><a href="/Vue/note/Kubernetes/" class="link-title">🐳容器</a> <span class="title" style="display:none;">🐳容器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>容器文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Vue/pages/b23923/" class="nav-link">Containerd</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Vue/note/Docker/" class="nav-link">📒Docker容器</a></li><li class="dropdown-subitem"><a href="/Vue/note/Containerd/" class="nav-link">📒Containerd容器</a></li><li class="dropdown-subitem"><a href="/Vue/note/Kubernetes/" class="nav-link">📒Kubernetes</a></li><li class="dropdown-subitem"><a href="/Vue/note/git/" class="nav-link">📒Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📒云原生" class="dropdown-title"><a href="/Vue/devops/" class="link-title">📒云原生</a> <span class="title" style="display:none;">📒云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/note/CICD/" class="nav-link">Devops</a></li><li class="dropdown-item"><!----> <a href="/Vue/note/Operator/" class="nav-link">Operator</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🌍技术" class="dropdown-title"><a href="/Vue/note/Traing/" class="link-title">🌍技术</a> <span class="title" style="display:none;">🌍技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/note/Traing/" class="nav-link">技能大赛</a></li><li class="dropdown-item"><!----> <a href="/Vue/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎖️考证" class="dropdown-title"><a href="/Vue/note/kaozhen/" class="link-title">🎖️考证</a> <span class="title" style="display:none;">🎖️考证</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/note/kaozhen/" class="nav-link">1+X云计算高级</a></li><li class="dropdown-item"><!----> <a href="/Vue/note/kaozhen/" class="nav-link">CKA</a></li><li class="dropdown-item"><!----> <a href="/Vue/note/Kubernetes/" class="nav-link">CKS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎉更多" class="dropdown-title"><a href="/Vue/more/" class="link-title">🎉更多</a> <span class="title" style="display:none;">🎉更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/Vue/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li></ul></div></div><div class="nav-item"><a href="/Vue/about/" class="nav-link">🔏关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🗿收藏" class="dropdown-title"><a href="/Vue/pages/beb6c0bd8a66cea6/" class="link-title">🗿收藏</a> <span class="title" style="display:none;">🗿收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/Vue/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/Vue/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/Vue/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/isicman/Vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/Vue/" class="nav-link">🐱首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐳容器" class="dropdown-title"><a href="/Vue/note/Kubernetes/" class="link-title">🐳容器</a> <span class="title" style="display:none;">🐳容器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>容器文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Vue/pages/b23923/" class="nav-link">Containerd</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Vue/note/Docker/" class="nav-link">📒Docker容器</a></li><li class="dropdown-subitem"><a href="/Vue/note/Containerd/" class="nav-link">📒Containerd容器</a></li><li class="dropdown-subitem"><a href="/Vue/note/Kubernetes/" class="nav-link">📒Kubernetes</a></li><li class="dropdown-subitem"><a href="/Vue/note/git/" class="nav-link">📒Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📒云原生" class="dropdown-title"><a href="/Vue/devops/" class="link-title">📒云原生</a> <span class="title" style="display:none;">📒云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/note/CICD/" class="nav-link">Devops</a></li><li class="dropdown-item"><!----> <a href="/Vue/note/Operator/" class="nav-link">Operator</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🌍技术" class="dropdown-title"><a href="/Vue/note/Traing/" class="link-title">🌍技术</a> <span class="title" style="display:none;">🌍技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/note/Traing/" class="nav-link">技能大赛</a></li><li class="dropdown-item"><!----> <a href="/Vue/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎖️考证" class="dropdown-title"><a href="/Vue/note/kaozhen/" class="link-title">🎖️考证</a> <span class="title" style="display:none;">🎖️考证</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/note/kaozhen/" class="nav-link">1+X云计算高级</a></li><li class="dropdown-item"><!----> <a href="/Vue/note/kaozhen/" class="nav-link">CKA</a></li><li class="dropdown-item"><!----> <a href="/Vue/note/Kubernetes/" class="nav-link">CKS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎉更多" class="dropdown-title"><a href="/Vue/more/" class="link-title">🎉更多</a> <span class="title" style="display:none;">🎉更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/Vue/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li></ul></div></div><div class="nav-item"><a href="/Vue/about/" class="nav-link">🔏关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🗿收藏" class="dropdown-title"><a href="/Vue/pages/beb6c0bd8a66cea6/" class="link-title">🗿收藏</a> <span class="title" style="display:none;">🗿收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/Vue/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/Vue/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/Vue/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/isicman/Vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>高级服务</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vue/pages/66cb4e/" class="sidebar-link">Trove组件</a></li><li><a href="/Vue/pages/de9d71/" aria-current="page" class="active sidebar-link">Manila组件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Vue/pages/3511d3/" class="sidebar-link">CloudKitty组件</a></li><li><a href="/Vue/pages/2a498a/" class="sidebar-link">Barbican组件</a></li><li><a href="/Vue/pages/4c3961/" class="sidebar-link">Untitled</a></li><li><a href="/Vue/pages/6887fd/" class="sidebar-link">VPNaaS的实现</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-5add8e0a><div class="articleInfo" data-v-5add8e0a><ul class="breadcrumbs" data-v-5add8e0a><li data-v-5add8e0a><a href="/Vue/" title="首页" class="iconfont icon-home router-link-active" data-v-5add8e0a></a></li> <li data-v-5add8e0a><a href="/Vue/note/OpenStack/#《OpenStack》学习笔记" data-v-5add8e0a>《OpenStack》学习笔记</a></li><li data-v-5add8e0a><a href="/Vue/note/OpenStack/#高级服务" data-v-5add8e0a>高级服务</a></li></ul> <div class="info" data-v-5add8e0a><div title="作者" class="author iconfont icon-touxiang" data-v-5add8e0a><a href="https://github.com/isicman/Vue" target="_blank" title="作者" class="beLink" data-v-5add8e0a>Vuens</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-5add8e0a><a href="javascript:;" data-v-5add8e0a>2022-05-10</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Manila组件<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="manila"><a href="#manila" class="header-anchor">#</a> Manila</h1> <p><code>Manila项目全称是File Share Service，文件共享即服务</code>。是OpenStack大帐篷模式下的子项目之一，用来提供云上的文件共享，支持CIFS协议和NFS协议。</p> <h3 id="manila简介"><a href="#manila简介" class="header-anchor">#</a> manila简介</h3> <p>和我们传统存储服务器一样,openstack的存储也分为3种:块存储(cinder),对象存储(swift),文件存储(manila).manila 提供的是带有完整文件系统的存储服务.可以提供的类型有:nfs,cifs,glusterfs,hdfs等.云主机可以直接在系统里面挂载manila启动的实例。</p> <h3 id="服务实现"><a href="#服务实现" class="header-anchor">#</a> 服务实现</h3> <p><strong><code>manila-api</code></strong></p> <p>一个 WSGI 应用程序，用于对整个共享文件系统服务进行身份验证和路由请求。它支持 OpenStack API。</p> <p><strong><code>manila-data</code></strong></p> <p>一个独立的服务，其目的是接收请求，处理具有潜在长时间运行时间的数据操作，例如复制、共享迁移或备份。</p> <p><strong><code>manila-scheduler</code></strong></p> <p>安排并将请求路由到适当的共享服务。调度程序使用可配置的过滤器和权重来路由请求。过滤器调度器是默认的，可以对诸如容量，可用性区，共享类型和功能以及自定义过滤器进行过滤。</p> <p><strong><code>mania-share</code></strong></p> <p><code>管理提供共享文件系统的后端设备。</code>Manila 共享服务通过使用共享后端驱动程序作为接口与后端设备进行通信。共享驱动程序可以以两种模式之一操作，无论是否处理共享服务器。共享服务器通过共享网络导出文件共享。如果共享文件系统服务中的共享服务器没有由驱动程序管理时，应该在共享文件系统服务的带之外处理网络需求。</p> <p>可运行于有共享服务器和无共享服务器两种模式。前者需要 Manila 关注组网，使用 nova、neutron 和 cinder 服务管理共享服务器；后者则不处理任何组网问题，使用 LVM 驱动和 NFS 共享，由用户保证云主机和 NFS 服务器之间的网络连接。</p> <ul><li>Shared File Systems Option 1: No driver support for share servers management</li></ul> <blockquote><p>选项1部署服务不包含对共享管理的驱动支持。这种模式下，服务不需要任何和网络有关的部署。操作者必须确保实例和NFS服务器之间的连接。本选项使用需要包含LVM和NFS包以及一个额外的命名为<code>manila-share</code>的LVM卷组的LVM驱动器。</p></blockquote> <ul><li>Shared File Systems Option 2: Driver support for share servers management</li></ul> <blockquote><p>选项2部署服务包含对共享管理的驱动支持。这种模式下，服务需要计算（nova），网络（neutron），块存储（cinder）服务来管理共享服务器。这部分信息用于创建共享服务器，就像创建共享网络一样。本选项使用支持共享服务处理的generic驱动器，并且需要一个连接到路由的私网``selfservice`。</p></blockquote> <p><strong><code>messaging Queue</code></strong></p> <p>在共享文件系统进程之间路由信息。</p> <p><strong><code>Backend Storage devices</code></strong></p> <p>共享文件服务需要某种形式的后端共享文件系统提供程序，引用实现使用块存储服务( Cinder ) 和服务虚拟机( VM ) 来提供共享。 其他驱动程序用于从各种供应商解决方案中访问共享文件系统。</p> <p>后端对应着一个共享文件系统实例的提供者。后端在 manila.conf 中进行定义。一个实例必然对应一个后端，而一个后端有且只有一个驱动。通过采用多个后端的方式，可以提供数据服务以保障高可用。</p> <p><strong><code>UserS and Tenants(Projects)</code></strong></p> <p><code>共享文件系统服务可以被许多不同的云计算消费者或客户(共享系统上的租户) 使用基于角色的访问任务。</code> 角色控制了允许用户执行的操作。 在默认配置中，大多数操作不需要特定的角色，除非他们只限于管理员，但是这可以由维护规则的适当的 policy.json 文件中的系统管理员来配置。 用户管理特定权限受到租户的限制。 通过 IP 或用户访问规则，可以保证访客登录和使用的权限。 用于控制可用硬件资源的资源消耗的配额是每个租户。</p> <p>对租户而言，配额管制可以限制：</p> <ul><li><code>可以创建的共享数量</code></li> <li><code>可供分享的千兆字节数</code></li> <li><code>可以创建的共享快照数量</code></li> <li><code>可以为共享快照提供的千兆字节数</code></li> <li><code>可以创建的共享网络的数量</code></li> <li><code>可以创建的共享组的数量</code></li> <li><code>可以创建的共享组快照的数量</code></li></ul> <p>您可以使用共享文件系统 CLI 修改默认配额值，因此配额设置的限制是由管理员用户编辑的。</p> <p><strong><code>Shares</code></strong></p> <p>共享实例是一个指定了协议、大小和可访问列表的存储单元，是 Manila 提供的基础原语单元。 所有的共享实例都存在于后端， 一些共享实例与共享网络和共享服务器相关联。 文件系统实例可被多个虚拟机并发访问，支持的主要协议是 NFS 和 CIFS，但也支持其他协议。</p> <p><strong><code>Snapshots</code></strong></p> <p>快照是一个共享实例在某一时刻的只读镜像。快照只能用于创建新的共享实例（包含快照数据）。只有在所有相关快照被删除时，共享实例才能被删除。</p> <p><strong><code>Share networks</code></strong></p> <p>共享网络描述与文件系统实例相关的网络实现，告知 Manila 一组共享文件系统实例使用的安全和网络配置。一个共享网络包括安全服务（ Security Service ）和涉及的网络及子网（ Network/Subnet ）。共享网络是一个面向多租户定义的对象，Manila 通过共享网络支持多租户，网络多租户通过标准特性如 VLAN 和 VXLAN 实现。一个共享文件系统实例只能属于一个共享网络。</p> <p><strong><code>Share type</code></strong></p> <p>共享类型是一个由管理员定义的“服务类型”，它包括一个租户可见的描述和一组租户不可见的键值对列表。Manila 调度器利用此键值对信息进行调度决策。</p> <p><strong><code>Extra Spec</code></strong></p> <p>额外规格即共享类型中的一组键值对。额外规格由 Manila 和后端驱动定义。</p> <p><strong><code>安全服务</code></strong></p> <p>安全服务指 LDAP、Active Directory、Kerberos 等用户安全服务。安全服务包含 Manila 创建一个服务器加入指定安全域必需的所有信息。一个共享文件系统实例可以被关联到多个安全服务。</p> <p><strong><code>Share Drivers</code></strong></p> <p>共享驱动的概念很明确。共享驱动是后端文件共享服务的具体实现，如 Clustered ONTAP、EMC VNX、GlusterFS 等。</p> <ul><li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/generic-driver.html" target="_blank" rel="noopener noreferrer">Generic approach for share provisioning<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/cephfs-native-driver.html" target="_blank" rel="noopener noreferrer">CephFS Native driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/dell-emc-vmax-driver.html" target="_blank" rel="noopener noreferrer">Dell EMC VMAX driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/dell-emc-unity-driver.html" target="_blank" rel="noopener noreferrer">Dell EMC Unity driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/dell-emc-vnx-driver.html" target="_blank" rel="noopener noreferrer">Dell EMC VNX driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/glusterfs-driver.html" target="_blank" rel="noopener noreferrer">GlusterFS driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/glusterfs-native-driver.html" target="_blank" rel="noopener noreferrer">GlusterFS Native driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/hdfs-native-driver.html" target="_blank" rel="noopener noreferrer">HDFS native driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/lvm-driver.html" target="_blank" rel="noopener noreferrer">LVM share driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/zfs-on-linux-driver.html" target="_blank" rel="noopener noreferrer">ZFS (on Linux) driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/zfssa-manila-driver.html" target="_blank" rel="noopener noreferrer">Oracle ZFS Storage Appliance driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/emc-isilon-driver.html" target="_blank" rel="noopener noreferrer">EMC Isilon driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/hitachi-hnas-driver.html" target="_blank" rel="noopener noreferrer">Hitachi NAS (HNAS) driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/hitachi-hsp-driver.html" target="_blank" rel="noopener noreferrer">Hitachi Hyper Scale-Out Platform File Services Driver for OpenStack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/hpe-3par-share-driver.html" target="_blank" rel="noopener noreferrer">HPE 3PAR driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/huawei-nas-driver.html" target="_blank" rel="noopener noreferrer">Huawei driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/ibm-spectrumscale-driver.html" target="_blank" rel="noopener noreferrer">IBM Spectrum Scale share driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/infinidat-share-driver.html" target="_blank" rel="noopener noreferrer">INFINIDAT InfiniBox Share driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/maprfs-native-driver.html" target="_blank" rel="noopener noreferrer">MapRFS native driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/netapp-cluster-mode-driver.html" target="_blank" rel="noopener noreferrer">NetApp Clustered Data ONTAP driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.openstack.org/manila/latest/configuration/shared-file-systems/drivers/quobyte-driver.html" target="_blank" rel="noopener noreferrer">Quobyte Driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><strong><code>Generic Share Driver</code></strong></p> <ul><li>Manila 为每个共享网络创建一个 Nova 计算实例</li> <li>Nova 计算实例通过 Cinder 的 Volume 来提供 NFS/CIFS 共享服务</li> <li>通过 Neturon 连接到现有网络及子网</li> <li>创建 Nova 实例所必需的 Nova 的 Flavor 、Glance 的镜像、SSH Keypair 均通过 Manila 进行配置</li> <li>Manila 则通过 SSH 对 Nova 实例进行配置</li></ul> <p><img src="https://raw.githubusercontent.com/isicman/image/main/img/202205101059001.png" alt="img"></p> <h3 id="实例生命周期管理"><a href="#实例生命周期管理" class="header-anchor">#</a> 实例生命周期管理</h3> <p>Manila 提供完整的共享文件系统实例生命周期管理，包括：</p> <ol><li><code>创建、删除实例；</code></li> <li><code>列出所有实例；</code></li> <li><code>获得实例细节信息；</code></li> <li><code>生成实例快照；</code></li> <li><code>修改实例访问信息；</code></li> <li><code>挂载和卸载文件系统实例。</code></li></ol> <h3 id="使用场景"><a href="#使用场景" class="header-anchor">#</a> 使用场景</h3> <p>以下是 Manila 的部分关键使用场景：</p> <ol><li><code>替代自主开发（home-grown）的 NAS 部署工具。</code></li> <li><code>支持传统企业应用。</code></li> <li><code>按需的开发和构建环境。</code></li> <li><code>通过 REST API 或命令与现有自动化框架集成。</code></li> <li><code>支持云原生工作负载，如 DBaaS。</code></li> <li><code>支持大数据，例如通过 Manila 的 HDFS 原生驱动插件。</code></li> <li><code>提供安全的跨租户文件共享。</code></li> <li><code>混合云间共享文件系统。</code></li></ol> <h3 id="共享类型"><a href="#共享类型" class="header-anchor">#</a> 共享类型</h3> <h4 id="共享类型操作"><a href="#共享类型操作" class="header-anchor">#</a> 共享类型操作</h4> <p>使用 manila type-create 创建共享类型：</p> <p><strong><code>基础语法：</code></strong></p> <ul><li><code>name</code>是共享类型名称</li> <li><code>is_public</code>定义共享类型的可见性（真/假）</li> <li><code>description</code>是一个自由格式的文本字段，用于描述共享类型的特征，以造福于用户</li> <li><code>extra-specs</code>定义一组以逗号分隔的键=值对的可选额外规范</li> <li><code>spec_driver_handles_share_servers</code>是强制性的附加规范（真/假）</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>manila type-create <span class="token punctuation">[</span>--is_public <span class="token operator">&lt;</span>is_public<span class="token operator">&gt;</span><span class="token punctuation">]</span>
                   <span class="token punctuation">[</span>--description <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span><span class="token punctuation">]</span>
                   <span class="token punctuation">[</span>--extra-specs <span class="token operator">&lt;</span>other-extra-specs<span class="token operator">&gt;</span><span class="token punctuation">]</span>
                   <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>spec_driver_handles_share_servers<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>要创建新的共享类型，您需要指定新共享类型的名称。您还需要额外的规格。新的共享类型可以是公共的，也可以是私有的。<code>driver_handles_share_servers</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-create my_type False --description &quot;Default share type&quot;</span>
+----------------------+--------------------------------------+
<span class="token operator">|</span> Property             <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+----------------------+--------------------------------------+
<span class="token operator">|</span> required_extra_specs <span class="token operator">|</span> driver_handles_share_servers <span class="token builtin class-name">:</span> False <span class="token operator">|</span>
<span class="token operator">|</span> Name                 <span class="token operator">|</span> my_type                              <span class="token operator">|</span>
<span class="token operator">|</span> Visibility           <span class="token operator">|</span> public                               <span class="token operator">|</span>
<span class="token operator">|</span> is_default           <span class="token operator">|</span> -                                    <span class="token operator">|</span>
<span class="token operator">|</span> ID                   <span class="token operator">|</span> 8b652f7a-5063-4bf3-a9c1-d257c50bbb41 <span class="token operator">|</span>
<span class="token operator">|</span> optional_extra_specs <span class="token operator">|</span>                                      <span class="token operator">|</span>
<span class="token operator">|</span> Description          <span class="token operator">|</span> Default share <span class="token builtin class-name">type</span>                   <span class="token operator">|</span>
+----------------------+--------------------------------------+

<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-list </span>
+--------------------------------------+---------+------------+------------+--------------------------------------+----------------------+--------------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name    <span class="token operator">|</span> visibility <span class="token operator">|</span> is_default <span class="token operator">|</span> required_extra_specs                 <span class="token operator">|</span> optional_extra_specs <span class="token operator">|</span> Description        <span class="token operator">|</span>
+--------------------------------------+---------+------------+------------+--------------------------------------+----------------------+--------------------+
<span class="token operator">|</span> 8b652f7a-5063-4bf3-a9c1-d257c50bbb41 <span class="token operator">|</span> my_type <span class="token operator">|</span> public     <span class="token operator">|</span> -          <span class="token operator">|</span> driver_handles_share_servers <span class="token builtin class-name">:</span> False <span class="token operator">|</span>                      <span class="token operator">|</span> Default share <span class="token builtin class-name">type</span> <span class="token operator">|</span>
+--------------------------------------+---------+------------+------------+--------------------------------------+----------------------+--------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>您没有提供可选功能，因此<em>默认情况下假定它们都处于关闭状态</em>。因此，非特权用户可以显式看到一些租户可见的功能。</p> <p>1.使用 manila 类型键设置或取消设置共享类型的额外规范，<code>manila type-key &lt;share_type&gt; set &lt;key=value&gt;</code>命令</p> <p>2.使用manila类型健取消规范使用<code>manila type-key &lt;share_type&gt; unset &lt;key&gt;</code>命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-key my_type set snapshot_support=True </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-show my_type</span>
+----------------------+--------------------------------------+
<span class="token operator">|</span> Property             <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+----------------------+--------------------------------------+
<span class="token operator">|</span> required_extra_specs <span class="token operator">|</span> driver_handles_share_servers <span class="token builtin class-name">:</span> False <span class="token operator">|</span>
<span class="token operator">|</span> description          <span class="token operator">|</span> Default share <span class="token builtin class-name">type</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> visibility           <span class="token operator">|</span> public                               <span class="token operator">|</span>
<span class="token operator">|</span> is_default           <span class="token operator">|</span> NO                                   <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                   <span class="token operator">|</span> 8b652f7a-5063-4bf3-a9c1-d257c50bbb41 <span class="token operator">|</span>
<span class="token operator">|</span> optional_extra_specs <span class="token operator">|</span> snapshot_support <span class="token builtin class-name">:</span> True              <span class="token operator">|</span>
<span class="token operator">|</span> name                 <span class="token operator">|</span> my_type                              <span class="token operator">|</span>
+----------------------+--------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="共享类型访问控制"><a href="#共享类型访问控制" class="header-anchor">#</a> 共享类型访问控制</h4> <p>您可以为指定的私有共享提供访问权限、撤消访问权限和检索允许的项目列表。</p> <p>创建私有类型：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-create my_type1 True \</span>
		--is_public False <span class="token punctuation">\</span>
		--extra-specs <span class="token assign-left variable">snapshot_support</span><span class="token operator">=</span>True 
+----------------------+--------------------------------------+
<span class="token operator">|</span> Property             <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+----------------------+--------------------------------------+
<span class="token operator">|</span> required_extra_specs <span class="token operator">|</span> driver_handles_share_servers <span class="token builtin class-name">:</span> True  <span class="token operator">|</span>
<span class="token operator">|</span> Name                 <span class="token operator">|</span> my_type1                             <span class="token operator">|</span>
<span class="token operator">|</span> Visibility           <span class="token operator">|</span> private                              <span class="token operator">|</span>
<span class="token operator">|</span> is_default           <span class="token operator">|</span> -                                    <span class="token operator">|</span>
<span class="token operator">|</span> ID                   <span class="token operator">|</span> 3c914a43-0a3c-457c-9f51-4cf560f8b865 <span class="token operator">|</span>
<span class="token operator">|</span> optional_extra_specs <span class="token operator">|</span> snapshot_support <span class="token builtin class-name">:</span> True              <span class="token operator">|</span>
<span class="token operator">|</span> Description          <span class="token operator">|</span> None                                 <span class="token operator">|</span>
+----------------------+--------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>注意:</p> <p>如果运行  manila  类型列表，则仅显示公共共享类型。若要查看私有共享类型，请运行  <strong><code>manila type-list --all</code></strong></p></blockquote> <p>通过提供demo和admin的项目的 ID 来授予对已创建的私有类型的访问权限：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># openstack project list </span>
+----------------------------------+---------+
<span class="token operator">|</span> ID                               <span class="token operator">|</span> Name    <span class="token operator">|</span>
+----------------------------------+---------+
<span class="token operator">|</span> 0b6f2d0be1d342e09edc31dc841db7a5 <span class="token operator">|</span> admin   <span class="token operator">|</span>
<span class="token operator">|</span> 32bb0b4849bc405a82aed64b7c0072fe <span class="token operator">|</span> demo    <span class="token operator">|</span>
<span class="token operator">|</span> b47586b9fe8845c0b65ac944616cb934 <span class="token operator">|</span> <span class="token function">service</span> <span class="token operator">|</span>
+----------------------------------+---------+
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-access-add my_type1 32bb0b4849bc405a82aed64b7c0072fe </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-access-add my_type1 0b6f2d0be1d342e09edc31dc841db7a5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>若要查看有关私有共享的访问权限的信息，请键入 ：<code>my_type1</code></p> <p>若要拒绝对指定项目的访问，请使用<code>manila type-access-remove &lt;share_type&gt; &lt;project_id&gt;</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-access-list my_type1 </span>
+----------------------------------+
<span class="token operator">|</span> Project_ID                       <span class="token operator">|</span>
+----------------------------------+
<span class="token operator">|</span> 0b6f2d0be1d342e09edc31dc841db7a5 <span class="token operator">|</span>
<span class="token operator">|</span> 32bb0b4849bc405a82aed64b7c0072fe <span class="token operator">|</span>
+----------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="共享组类型"><a href="#共享组类型" class="header-anchor">#</a> 共享组类型</h3> <p>共享组类型是共享组的类型，就像<a href="https://docs.openstack.org/manila/yoga/admin/shared-file-systems-share-types.html#shared-file-systems-share-types" target="_blank" rel="noopener noreferrer">共享的共享类型一<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>样。组类型与组规范相关联，类似于将额外规范与共享类型相关联的方式。</p> <p>共享组类型可帮助计划程序在创建共享组时筛选或选择后端，并在共享组上设置任何后端特定参数。任何能够以有利方式执行组操作的驱动程序都可以将其报告为组功能，例如：</p> <ul><li><strong><code>有序写入</code></strong></li> <li><strong><code>一致的快照</code></strong></li> <li><strong><code>组复制</code></strong></li> <li><strong><code>组备份</code></strong></li></ul> <h4 id="共享组类型操作"><a href="#共享组类型操作" class="header-anchor">#</a> 共享组类型操作</h4> <p>要创建共享组类型，请使用<code>manila share-group-type-create</code>命令作为：</p> <p><strong><code>基础语法：</code></strong></p> <ul><li><code>name</code></li> <li><code>--is_public</code></li> <li><code>share_types</code></li> <li><code>--group-specs</code></li></ul> <p>是共享组类型名称，并定义共享组类型的可见性级别。一个共享组可以包含多个 . 是用于过滤后端的额外规格。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>manila share-group-type-create <span class="token punctuation">[</span>--is_public <span class="token operator">&lt;</span>is_public<span class="token operator">&gt;</span><span class="token punctuation">]</span>
                               <span class="token punctuation">[</span>--group-specs <span class="token punctuation">[</span><span class="token operator">&lt;</span>key<span class="token operator">=</span>value<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>key<span class="token operator">=</span>value<span class="token operator">&gt;</span> <span class="token punctuation">..</span>.<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
                               <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>share_types<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>若要创建新的共享组类型，需要指定新共享组类型和现有共享类型的名称。新的共享组类型也可以是公共的。一个共享组可以包含多种共享类型。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-list </span>
+--------------------------------------+----------+------------+------------+--------------------------------------+-------------------------+--------------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name     <span class="token operator">|</span> visibility <span class="token operator">|</span> is_default <span class="token operator">|</span> required_extra_specs                 <span class="token operator">|</span> optional_extra_specs    <span class="token operator">|</span> Description        <span class="token operator">|</span>
+--------------------------------------+----------+------------+------------+--------------------------------------+-------------------------+--------------------+
<span class="token operator">|</span> 3c914a43-0a3c-457c-9f51-4cf560f8b865 <span class="token operator">|</span> my_type1 <span class="token operator">|</span> private    <span class="token operator">|</span> -          <span class="token operator">|</span> driver_handles_share_servers <span class="token builtin class-name">:</span> True  <span class="token operator">|</span> snapshot_support <span class="token builtin class-name">:</span> True <span class="token operator">|</span> None               <span class="token operator">|</span>
<span class="token operator">|</span> 8b652f7a-5063-4bf3-a9c1-d257c50bbb41 <span class="token operator">|</span> my_type  <span class="token operator">|</span> public     <span class="token operator">|</span> -          <span class="token operator">|</span> driver_handles_share_servers <span class="token builtin class-name">:</span> False <span class="token operator">|</span> snapshot_support <span class="token builtin class-name">:</span> True <span class="token operator">|</span> Default share <span class="token builtin class-name">type</span> <span class="token operator">|</span>
+--------------------------------------+----------+------------+------------+--------------------------------------+-------------------------+--------------------+

<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-create group_type_for_cg my_type --is_public True </span>
+------------+--------------------------------------+
<span class="token operator">|</span> Property   <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+------------+--------------------------------------+
<span class="token operator">|</span> is_default <span class="token operator">|</span> -                                    <span class="token operator">|</span>
<span class="token operator">|</span> ID         <span class="token operator">|</span> 61ced04e-9434-4b51-9877-b7239ab95d08 <span class="token operator">|</span>
<span class="token operator">|</span> Visibility <span class="token operator">|</span> public                               <span class="token operator">|</span>
<span class="token operator">|</span> Name       <span class="token operator">|</span> group_type_for_cg                    <span class="token operator">|</span>
+------------+--------------------------------------+

<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-list </span>
+--------------------------------------+-------------------+------------+------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name              <span class="token operator">|</span> visibility <span class="token operator">|</span> is_default <span class="token operator">|</span>
+--------------------------------------+-------------------+------------+------------+
<span class="token operator">|</span> 61ced04e-9434-4b51-9877-b7239ab95d08 <span class="token operator">|</span> group_type_for_cg <span class="token operator">|</span> public     <span class="token operator">|</span> -          <span class="token operator">|</span>
+--------------------------------------+-------------------+------------+------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>您可以使用 manila 共享组类型键设置或取消设置<code>manila share-group-type-key &lt;share_group_type&gt; set &lt;key=value&gt;</code>命令。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-key  group_type_for_cg set consistent_snapshot_support=host </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-specs-list </span>
+--------------------------------------+-------------------+------------------------------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name              <span class="token operator">|</span> all_extra_specs                    <span class="token operator">|</span>
+--------------------------------------+-------------------+------------------------------------+
<span class="token operator">|</span> 61ced04e-9434-4b51-9877-b7239ab95d08 <span class="token operator">|</span> group_type_for_cg <span class="token operator">|</span> consistent_snapshot_support <span class="token builtin class-name">:</span> <span class="token function">host</span> <span class="token operator">|</span>
+--------------------------------------+-------------------+------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="共享组类型访问权限"><a href="#共享组类型访问权限" class="header-anchor">#</a> 共享组类型访问权限</h4> <p>您可以管理对不同项目的私有共享组类型的访问权限。管理员可以为指定的专用共享组提供访问权限、撤消访问权限和检索有关访问权限的信息。</p> <p>创建专用组类型：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-create my_type1 my_type1 --is_public False </span>
+------------+--------------------------------------+
<span class="token operator">|</span> Property   <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+------------+--------------------------------------+
<span class="token operator">|</span> is_default <span class="token operator">|</span> -                                    <span class="token operator">|</span>
<span class="token operator">|</span> ID         <span class="token operator">|</span> e25270c1-5307-4b01-8cb9-caabafe10142 <span class="token operator">|</span>
<span class="token operator">|</span> Visibility <span class="token operator">|</span> private                              <span class="token operator">|</span>
<span class="token operator">|</span> Name       <span class="token operator">|</span> my_type1                             <span class="token operator">|</span>
+------------+--------------------------------------+
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># openstack project list </span>
+----------------------------------+---------+
<span class="token operator">|</span> ID                               <span class="token operator">|</span> Name    <span class="token operator">|</span>
+----------------------------------+---------+
<span class="token operator">|</span> 0b6f2d0be1d342e09edc31dc841db7a5 <span class="token operator">|</span> admin   <span class="token operator">|</span>
<span class="token operator">|</span> 32bb0b4849bc405a82aed64b7c0072fe <span class="token operator">|</span> demo    <span class="token operator">|</span>
<span class="token operator">|</span> b47586b9fe8845c0b65ac944616cb934 <span class="token operator">|</span> <span class="token function">service</span> <span class="token operator">|</span>
+----------------------------------+---------+
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-access-add my_type1 0b6f2d0be1d342e09edc31dc841db7a5 </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-access-add my_type1 32bb0b4849bc405a82aed64b7c0072fe </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-access-remove my_type1 32bb0b4849bc405a82aed64b7c0072fe </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="共享组"><a href="#共享组" class="header-anchor">#</a> 共享组</h3> <p>自 Ocata 发布以来，共享组支持在马尼拉可用。共享组是一组共享，用户可以对其执行基于组的操作，例如一起拍摄快照。此框架旨在允许在马尼拉的未来版本中一致迁移或复制一组共享。当前支持创建组类型和组规范、创建共享组以及创建组快照。可以使用命令行客户端执行这些组操作。</p> <p>若要创建共享组并访问它，以下一般概念是先决条件：</p> <ol><li>要创建共享组，请使用 <code>manila 共享-组-创建</code>命令。</li> <li>您可以指定 、<a href="https://docs.openstack.org/manila/yoga/admin/shared-file-systems-share-group-types.html#shared-file-systems-share-group-types" target="_blank" rel="noopener noreferrer">共享组类型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://docs.openstack.org/manila/yoga/admin/shared-file-systems-share-types.html#shared-file-systems-share-types" target="_blank" rel="noopener noreferrer">共享类型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。<code>share-network source-share-group-snapshot availability-zone</code></li> <li>共享组变为可用后，使用 <strong>manila create</strong> 命令在共享组中创建共享。</li></ol> <h4 id="创建共享与共享组的共享"><a href="#创建共享与共享组的共享" class="header-anchor">#</a> 创建共享与共享组的共享</h4> <h4 id="对共享组的操作"><a href="#对共享组的操作" class="header-anchor">#</a> 对共享组的操作</h4> <p>一些操作，如延长和收缩，本质上仅适用于单个股票。从理论上讲，可以应用扩展到一个组，增加每个成员的大小，但这最初不会是一个用例。此类别中的任何操作都必须对组成员保持可用，并且可以允许其他操作（如拍摄组成员的快照），但迁移或复制等操作仅在组级别可用，而不能在其成员上使用。</p> <table><thead><tr><th style="text-align:left;"></th> <th style="text-align:left;"></th></tr></thead> <tbody><tr><td style="text-align:left;">共享操作</td> <td style="text-align:left;">共享组操作</td></tr> <tr><td style="text-align:left;">创建（共享类型）</td> <td style="text-align:left;">创建（共享类型、组类型）</td></tr> <tr><td style="text-align:left;">删除</td> <td style="text-align:left;">删除（群组）</td></tr> <tr><td style="text-align:left;">快照</td> <td style="text-align:left;">快照（可能是也可能不是一致的组快照）</td></tr> <tr><td style="text-align:left;">从快照创建</td> <td style="text-align:left;">从组快照创建</td></tr> <tr><td style="text-align:left;">克隆</td> <td style="text-align:left;">克隆组（和所有成员）（计划）</td></tr> <tr><td style="text-align:left;">复制</td> <td style="text-align:left;">复制（计划）</td></tr> <tr><td style="text-align:left;">迁移</td> <td style="text-align:left;">迁移（计划）</td></tr> <tr><td style="text-align:left;">延伸/收缩</td> <td style="text-align:left;">不适用</td></tr></tbody></table> <p>创建共享组类型</p> <p>在此示例中，我们将创建一个新的共享组类型，并将<code>consistent_snapshot_support</code>指定为正在使用的共享组类型创建中的组规范。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment">#  manila type-create default_share_type False --description &quot;Default&quot;        </span>
+----------------------+--------------------------------------+
<span class="token operator">|</span> Property             <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+----------------------+--------------------------------------+
<span class="token operator">|</span> required_extra_specs <span class="token operator">|</span> driver_handles_share_servers <span class="token builtin class-name">:</span> False <span class="token operator">|</span>
<span class="token operator">|</span> Name                 <span class="token operator">|</span> default_share_type                   <span class="token operator">|</span>
<span class="token operator">|</span> Visibility           <span class="token operator">|</span> public                               <span class="token operator">|</span>
<span class="token operator">|</span> is_default           <span class="token operator">|</span> YES                                  <span class="token operator">|</span>
<span class="token operator">|</span> ID                   <span class="token operator">|</span> 36eb363f-80a3-4a97-a0b3-c13ca3e3f930 <span class="token operator">|</span>
<span class="token operator">|</span> optional_extra_specs <span class="token operator">|</span>                                      <span class="token operator">|</span>
<span class="token operator">|</span> Description          <span class="token operator">|</span> Default                              <span class="token operator">|</span>
+----------------------+--------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>创建共享组类型以及设置规范：</p> <ol><li>使用 <code>manila share-group-create</code>命令创建新的共享组类型。指定名称和共享类型。</li> <li>使用<code>manila share-group-type-key</code>命令将组规范设置为共享组类型。  // 这一步不需要设置</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-create group_type_for_cg default_share_type</span>
+------------+--------------------------------------+
<span class="token operator">|</span> Property   <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+------------+--------------------------------------+
<span class="token operator">|</span> is_default <span class="token operator">|</span> -                                    <span class="token operator">|</span>
<span class="token operator">|</span> ID         <span class="token operator">|</span> 1ad6a5ae-8083-4565-9780-7169d9bb85c5 <span class="token operator">|</span>
<span class="token operator">|</span> Visibility <span class="token operator">|</span> public                               <span class="token operator">|</span>
<span class="token operator">|</span> Name       <span class="token operator">|</span> group_type_for_cg                    <span class="token operator">|</span>
+------------+--------------------------------------+

<span class="token comment"># 该步骤不需要设置</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-type-key group_type_for_cg set consistent_snapshot_support=host</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>注意</p> <p>此命令没有输出。要验证组规范，请使用 <strong>manila 共享组类型规范列表</strong>命令，并将共享组类型的名称或 ID 指定为参数。</p></blockquote> <p>创建共享组</p> <p>使用<code>manila share-group-create</code>命令创建共享组。指定我们创建的共享组类型</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-create --share-group-type group_type_for_cg               </span>
+--------------------------------+--------------------------------------+
<span class="token operator">|</span> Property                       <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+--------------------------------+--------------------------------------+
<span class="token operator">|</span> status                         <span class="token operator">|</span> creating                             <span class="token operator">|</span>
<span class="token operator">|</span> description                    <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> availability_zone              <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> created_at                     <span class="token operator">|</span> <span class="token number">2022</span>-05-11T09:18:19.756083           <span class="token operator">|</span>
<span class="token operator">|</span> source_share_group_snapshot_id <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_network_id               <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_server_id                <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">host</span>                           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_group_type_id            <span class="token operator">|</span> f5b4fcbd-451b-42c6-8dfb-d15f0befc0a5 <span class="token operator">|</span>
<span class="token operator">|</span> consistent_snapshot_support    <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> project_id                     <span class="token operator">|</span> 47924529caa440ffa432454f4cc2daa0     <span class="token operator">|</span>
<span class="token operator">|</span> share_types                    <span class="token operator">|</span> 7b75f62e-7903-47f6-9a92-be8bcb36163d <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                             <span class="token operator">|</span> <span class="token number">52497308</span>-69c1-48eb-a2b9-b7a052c4367a <span class="token operator">|</span>
<span class="token operator">|</span> name                           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
+--------------------------------+--------------------------------------+

<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-show 52497308-69c1-48eb-a2b9-b7a052c4367a</span>
+--------------------------------+--------------------------------------+
<span class="token operator">|</span> Property                       <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+--------------------------------+--------------------------------------+
<span class="token operator">|</span> status                         <span class="token operator">|</span> available                            <span class="token operator">|</span>
<span class="token operator">|</span> description                    <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> availability_zone              <span class="token operator">|</span> nova                                 <span class="token operator">|</span>
<span class="token operator">|</span> created_at                     <span class="token operator">|</span> <span class="token number">2022</span>-05-11T09:18:19.000000           <span class="token operator">|</span>
<span class="token operator">|</span> source_share_group_snapshot_id <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_network_id               <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_server_id                <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">host</span>                           <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool          |</span>
<span class="token operator">|</span> share_group_type_id            <span class="token operator">|</span> f5b4fcbd-451b-42c6-8dfb-d15f0befc0a5 <span class="token operator">|</span>
<span class="token operator">|</span> consistent_snapshot_support    <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> project_id                     <span class="token operator">|</span> 47924529caa440ffa432454f4cc2daa0     <span class="token operator">|</span>
<span class="token operator">|</span> share_types                    <span class="token operator">|</span> 7b75f62e-7903-47f6-9a92-be8bcb36163d <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                             <span class="token operator">|</span> <span class="token number">52497308</span>-69c1-48eb-a2b9-b7a052c4367a <span class="token operator">|</span>
<span class="token operator">|</span> name                           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
+--------------------------------+--------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><blockquote><p>注意</p> <p>一个共享组可以包含多种共享类型。共享类型将直接从共享组类型继承.</p></blockquote> <h4 id="创建与共享组的共享"><a href="#创建与共享组的共享" class="header-anchor">#</a> 创建与共享组的共享</h4> <p>使用 <code>manila create</code> 命令创建共享。指定共享协议、大小、共享组类型和共享名称。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila create NFS 1 --share-group 52497308-69c1-48eb-a2b9-b7a052c4367a --name test_group_share_1 </span>
+---------------------------------------+--------------------------------------+
<span class="token operator">|</span> Property                              <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+---------------------------------------+--------------------------------------+
<span class="token operator">|</span> status                                <span class="token operator">|</span> creating                             <span class="token operator">|</span>
<span class="token operator">|</span> share_type_name                       <span class="token operator">|</span> default_share_type                   <span class="token operator">|</span>
<span class="token operator">|</span> description                           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> availability_zone                     <span class="token operator">|</span> nova                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_network_id                      <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_server_id                       <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_group_id                        <span class="token operator">|</span> <span class="token number">52497308</span>-69c1-48eb-a2b9-b7a052c4367a <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">host</span>                                  <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool          |</span>
<span class="token operator">|</span> revert_to_snapshot_support            <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> access_rules_status                   <span class="token operator">|</span> active                               <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_id                           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> create_share_from_snapshot_support    <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> is_public                             <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> task_state                            <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_support                      <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                                    <span class="token operator">|</span> 90f2b422-4624-4986-a5f0-1c95053c40d3 <span class="token operator">|</span>
<span class="token operator">|</span> size                                  <span class="token operator">|</span> <span class="token number">1</span>                                    <span class="token operator">|</span>
<span class="token operator">|</span> source_share_group_snapshot_member_id <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> user_id                               <span class="token operator">|</span> b5c97eaf97684692936156ef49f60e23     <span class="token operator">|</span>
<span class="token operator">|</span> name                                  <span class="token operator">|</span> test_group_share_1                   <span class="token operator">|</span>
<span class="token operator">|</span> share_type                            <span class="token operator">|</span> 7b75f62e-7903-47f6-9a92-be8bcb36163d <span class="token operator">|</span>
<span class="token operator">|</span> has_replicas                          <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> replication_type                      <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> created_at                            <span class="token operator">|</span> <span class="token number">2022</span>-05-11T09:23:32.000000           <span class="token operator">|</span>
<span class="token operator">|</span> share_proto                           <span class="token operator">|</span> NFS                                  <span class="token operator">|</span>
<span class="token operator">|</span> mount_snapshot_support                <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> project_id                            <span class="token operator">|</span> 47924529caa440ffa432454f4cc2daa0     <span class="token operator">|</span>
<span class="token operator">|</span> metadata                              <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>                                   <span class="token operator">|</span>
+---------------------------------------+--------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>使用同一共享组创建另一个共享，并命名为“test_group_share_2”。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila create NFS 1 --share-group 52497308-69c1-48eb-a2b9-b7a052c4367a --name test_group_share_2 </span>
+---------------------------------------+--------------------------------------+
<span class="token operator">|</span> Property                              <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+---------------------------------------+--------------------------------------+
<span class="token operator">|</span> status                                <span class="token operator">|</span> creating                             <span class="token operator">|</span>
<span class="token operator">|</span> share_type_name                       <span class="token operator">|</span> default_share_type                   <span class="token operator">|</span>
<span class="token operator">|</span> description                           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> availability_zone                     <span class="token operator">|</span> nova                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_network_id                      <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_server_id                       <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_group_id                        <span class="token operator">|</span> <span class="token number">52497308</span>-69c1-48eb-a2b9-b7a052c4367a <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">host</span>                                  <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool          |</span>
<span class="token operator">|</span> revert_to_snapshot_support            <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> access_rules_status                   <span class="token operator">|</span> active                               <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_id                           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> create_share_from_snapshot_support    <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> is_public                             <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> task_state                            <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_support                      <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                                    <span class="token operator">|</span> 8e722534-f92d-42fa-968c-817555ad462c <span class="token operator">|</span>
<span class="token operator">|</span> size                                  <span class="token operator">|</span> <span class="token number">1</span>                                    <span class="token operator">|</span>
<span class="token operator">|</span> source_share_group_snapshot_member_id <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> user_id                               <span class="token operator">|</span> b5c97eaf97684692936156ef49f60e23     <span class="token operator">|</span>
<span class="token operator">|</span> name                                  <span class="token operator">|</span> test_group_share_2                   <span class="token operator">|</span>
<span class="token operator">|</span> share_type                            <span class="token operator">|</span> 7b75f62e-7903-47f6-9a92-be8bcb36163d <span class="token operator">|</span>
<span class="token operator">|</span> has_replicas                          <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> replication_type                      <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> created_at                            <span class="token operator">|</span> <span class="token number">2022</span>-05-11T09:25:18.000000           <span class="token operator">|</span>
<span class="token operator">|</span> share_proto                           <span class="token operator">|</span> NFS                                  <span class="token operator">|</span>
<span class="token operator">|</span> mount_snapshot_support                <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> project_id                            <span class="token operator">|</span> 47924529caa440ffa432454f4cc2daa0     <span class="token operator">|</span>
<span class="token operator">|</span> metadata                              <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>                                   <span class="token operator">|</span>
+---------------------------------------+--------------------------------------+

<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila list</span>
+--------------------------------------+--------------------+------+-------------+-----------+-----------+--------------------+-----------------------------+-------------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name               <span class="token operator">|</span> Size <span class="token operator">|</span> Share Proto <span class="token operator">|</span> Status    <span class="token operator">|</span> Is Public <span class="token operator">|</span> Share Type Name    <span class="token operator">|</span> Host                        <span class="token operator">|</span> Availability Zone <span class="token operator">|</span>
+--------------------------------------+--------------------+------+-------------+-----------+-----------+--------------------+-----------------------------+-------------------+
<span class="token operator">|</span> 8e722534-f92d-42fa-968c-817555ad462c <span class="token operator">|</span> test_group_share_2 <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> NFS         <span class="token operator">|</span> available <span class="token operator">|</span> False     <span class="token operator">|</span> default_share_type <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool | nova              |</span>
<span class="token operator">|</span> 90f2b422-4624-4986-a5f0-1c95053c40d3 <span class="token operator">|</span> test_group_share_1 <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> NFS         <span class="token operator">|</span> available <span class="token operator">|</span> False     <span class="token operator">|</span> default_share_type <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool | nova              |</span>
+--------------------------------------+--------------------+------+-------------+-----------+-----------+--------------------+-----------------------------+-------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h4 id="创建共享组快照"><a href="#创建共享组快照" class="header-anchor">#</a> 创建共享组快照</h4> <p>创建共享组的共享组 sanpshot</p> <p>使用<code>manila share-group-snapshot-create</code>命令创建共享组快照。指定共享组 ID 或名称。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-snapshot-create 52497308-69c1-48eb-a2b9-b7a052c4367a</span>
+----------------+--------------------------------------+
<span class="token operator">|</span> Property       <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+----------------+--------------------------------------+
<span class="token operator">|</span> status         <span class="token operator">|</span> creating                             <span class="token operator">|</span>
<span class="token operator">|</span> name           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> created_at     <span class="token operator">|</span> <span class="token number">2022</span>-05-11T09:26:13.122292           <span class="token operator">|</span>
<span class="token operator">|</span> share_group_id <span class="token operator">|</span> <span class="token number">52497308</span>-69c1-48eb-a2b9-b7a052c4367a <span class="token operator">|</span>
<span class="token operator">|</span> project_id     <span class="token operator">|</span> 47924529caa440ffa432454f4cc2daa0     <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>             <span class="token operator">|</span> cfb7a8bb-d0fa-48ee-9d69-5520450952ba <span class="token operator">|</span>
<span class="token operator">|</span> description    <span class="token operator">|</span> None                                 <span class="token operator">|</span>
+----------------+--------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>显示共享组快照的成员</p> <p>使用<code>manila share-group-snapshot-list-members</code>命令查看共享组快照的所有共享成员。指定共享组快照 ID 或名称。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila share-group-snapshot-list-members cfb7a8bb-d0fa-48ee-9d69-5520450952ba </span>
+--------------------------------------+------+
<span class="token operator">|</span> Share ID                             <span class="token operator">|</span> Size <span class="token operator">|</span>
+--------------------------------------+------+
<span class="token operator">|</span> 8e722534-f92d-42fa-968c-817555ad462c <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span>
<span class="token operator">|</span> 90f2b422-4624-4986-a5f0-1c95053c40d3 <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span>
+--------------------------------------+------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="共享快照"><a href="#共享快照" class="header-anchor">#</a> 共享快照</h3> <p>共享文件系统服务提供了一种快照机制，通过运行<code>manila snapshot-create</code>命令来帮助用户还原数据。</p> <p>要导出快照，请从中创建共享，然后将新共享装载到实例。将附加共享中的文件复制到存档中。</p> <p>要导入快照，请创建一个具有适当大小的新共享，将其附加到实例，然后将文件从存档复制到附加的文件系统。</p> <blockquote><p>注意</p> <p>如果共享已保存依赖快照，则无法将其删除。</p></blockquote> <h4 id="从共享创建快照"><a href="#从共享创建快照" class="header-anchor">#</a> 从共享创建快照</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila snapshot-create Share1 --name Snapshot1 --description &quot;Snapshot of Share1&quot;</span>
+-------------+--------------------------------------+
<span class="token operator">|</span> Property    <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+-------------+--------------------------------------+
<span class="token operator">|</span> status      <span class="token operator">|</span> creating                             <span class="token operator">|</span>
<span class="token operator">|</span> share_id    <span class="token operator">|</span> aca648eb-8c03-4394-a5cc-755066b7eb66 <span class="token operator">|</span>
<span class="token operator">|</span> user_id     <span class="token operator">|</span> 5c7bdb6eb0504d54a619acf8375c08ce     <span class="token operator">|</span>
<span class="token operator">|</span> description <span class="token operator">|</span> Snapshot of Share1                   <span class="token operator">|</span>
<span class="token operator">|</span> created_at  <span class="token operator">|</span> <span class="token number">2015</span>-09-25T05:27:38.000000           <span class="token operator">|</span>
<span class="token operator">|</span> size        <span class="token operator">|</span> <span class="token number">1</span>                                    <span class="token operator">|</span>
<span class="token operator">|</span> share_proto <span class="token operator">|</span> NFS                                  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>          <span class="token operator">|</span> 962e8126-35c3-47bb-8c00-f0ee37f42ddd <span class="token operator">|</span>
<span class="token operator">|</span> project_id  <span class="token operator">|</span> cadd7139bc3148b8973df097c0911016     <span class="token operator">|</span>
<span class="token operator">|</span> share_size  <span class="token operator">|</span> <span class="token number">1</span>                                    <span class="token operator">|</span>
<span class="token operator">|</span> name        <span class="token operator">|</span> Snapshot1                            <span class="token operator">|</span>
+-------------+--------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>如果需要，请更新快照名称或描述：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila snapshot-rename Snapshot1 Snapshot_1 --description &quot;Snapshot of Share1. Updated.&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>要从快照创建数据的副本，请使用 <strong>manila create</strong> with key 。这将从现有快照创建新共享。从快照创建共享并检查其是否可用：<code>--snapshot-id</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila create nfs 1 --name Share2 --metadata source=snapshot --description &quot;Share from a snapshot.&quot; --snapshot-id 962e8126-35c3-47bb-8c00-f0ee37f42ddd</span>
+-----------------------------+--------------------------------------+
<span class="token operator">|</span> Property                    <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+-----------------------------+--------------------------------------+
<span class="token operator">|</span> status                      <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_type_name             <span class="token operator">|</span> default                              <span class="token operator">|</span>
<span class="token operator">|</span> description                 <span class="token operator">|</span> Share from a snapshot.               <span class="token operator">|</span>
<span class="token operator">|</span> availability_zone           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_network_id            <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> export_locations            <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>                                   <span class="token operator">|</span>
<span class="token operator">|</span> share_server_id             <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_group_id              <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">host</span>                        <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_id                 <span class="token operator">|</span> 962e8126-35c3-47bb-8c00-f0ee37f42ddd <span class="token operator">|</span>
<span class="token operator">|</span> is_public                   <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> task_state                  <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_support            <span class="token operator">|</span> True                                 <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                          <span class="token operator">|</span> b6b0617c-ea51-4450-848e-e7cff69238c7 <span class="token operator">|</span>
<span class="token operator">|</span> size                        <span class="token operator">|</span> <span class="token number">1</span>                                    <span class="token operator">|</span>
<span class="token operator">|</span> name                        <span class="token operator">|</span> Share2                               <span class="token operator">|</span>
<span class="token operator">|</span> share_type                  <span class="token operator">|</span> c0086582-30a6-4060-b096-a42ec9d66b86 <span class="token operator">|</span>
<span class="token operator">|</span> created_at                  <span class="token operator">|</span> <span class="token number">2015</span>-09-25T06:25:50.240417           <span class="token operator">|</span>
<span class="token operator">|</span> export_location             <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_proto                 <span class="token operator">|</span> NFS                                  <span class="token operator">|</span>
<span class="token operator">|</span> project_id                  <span class="token operator">|</span> 20787a7ba11946adad976463b57d8a2f     <span class="token operator">|</span>
<span class="token operator">|</span> metadata                    <span class="token operator">|</span> <span class="token punctuation">{</span>u<span class="token string">'source'</span><span class="token builtin class-name">:</span> u<span class="token string">'snapshot'</span><span class="token punctuation">}</span>             <span class="token operator">|</span>
+-----------------------------+--------------------------------------+

<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila show Share2</span>
+-----------------------------+-------------------------------------------+
<span class="token operator">|</span> Property                    <span class="token operator">|</span> Value                                     <span class="token operator">|</span>
+-----------------------------+-------------------------------------------+
<span class="token operator">|</span> status                      <span class="token operator">|</span> available                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_type_name             <span class="token operator">|</span> default                                   <span class="token operator">|</span>
<span class="token operator">|</span> description                 <span class="token operator">|</span> Share from a snapshot.                    <span class="token operator">|</span>
<span class="token operator">|</span> availability_zone           <span class="token operator">|</span> nova                                      <span class="token operator">|</span>
<span class="token operator">|</span> share_network_id            <span class="token operator">|</span> 5c3cbabb-f4da-465f-bc7f-fadbe047b85a      <span class="token operator">|</span>
<span class="token operator">|</span> export_locations            <span class="token operator">|</span> <span class="token number">10.254</span>.0.3:/shares/share-1dc2a471-3d47-<span class="token punctuation">..</span>.<span class="token operator">|</span>
<span class="token operator">|</span> share_server_id             <span class="token operator">|</span> 41b7829d-7f6b-4c96-aea5-d106c2959961      <span class="token operator">|</span>
<span class="token operator">|</span> share_group_id              <span class="token operator">|</span> None                                      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">host</span>                        <span class="token operator">|</span> manila@generic1<span class="token comment">#GENERIC1                  |</span>
<span class="token operator">|</span> snapshot_id                 <span class="token operator">|</span> 962e8126-35c3-47bb-8c00-f0ee37f42ddd      <span class="token operator">|</span>
<span class="token operator">|</span> is_public                   <span class="token operator">|</span> False                                     <span class="token operator">|</span>
<span class="token operator">|</span> task_state                  <span class="token operator">|</span> None                                      <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_support            <span class="token operator">|</span> True                                      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                          <span class="token operator">|</span> b6b0617c-ea51-4450-848e-e7cff69238c7      <span class="token operator">|</span>
<span class="token operator">|</span> size                        <span class="token operator">|</span> <span class="token number">1</span>                                         <span class="token operator">|</span>
<span class="token operator">|</span> name                        <span class="token operator">|</span> Share2                                    <span class="token operator">|</span>
<span class="token operator">|</span> share_type                  <span class="token operator">|</span> c0086582-30a6-4060-b096-a42ec9d66b86      <span class="token operator">|</span>
<span class="token operator">|</span> created_at                  <span class="token operator">|</span> <span class="token number">2015</span>-09-25T06:25:50.000000                <span class="token operator">|</span>
<span class="token operator">|</span> share_proto                 <span class="token operator">|</span> NFS                                       <span class="token operator">|</span>
<span class="token operator">|</span> project_id                  <span class="token operator">|</span> 20787a7ba11946adad976463b57d8a2f          <span class="token operator">|</span>
<span class="token operator">|</span> metadata                    <span class="token operator">|</span> <span class="token punctuation">{</span>u<span class="token string">'source'</span><span class="token builtin class-name">:</span> u<span class="token string">'snapshot'</span><span class="token punctuation">}</span>                  <span class="token operator">|</span>
+-----------------------------+-------------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="共享基本操作"><a href="#共享基本操作" class="header-anchor">#</a> 共享基本操作</h3> <h4 id="一般概念"><a href="#一般概念" class="header-anchor">#</a> 一般概念</h4> <p>若要创建并访问它，以下一般概念是必备知识：</p> <ol><li>要创建共享，请使用  <strong><code>manila create</code></strong>  命令并指定所需的参数：共享的大小和共享文件系统协议。支持或共享文件系统协议。<code>NFS、CIFS、GlusterFS、HDFS、CephFS、MAPRFS</code></li> <li>您还可以选择指定共享网络和共享类型。</li> <li>共享变为可用后，使用  <strong><code>manila show</code></strong>  命令获取共享导出位置。</li> <li>获取共享导出位置后，可以为共享创建<a href="https://docs.openstack.org/manila/yoga/admin/shared-file-systems-crud-share.html#access-to-share" target="_blank" rel="noopener noreferrer">访问规则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、装载共享并使用远程文件系统上的文件。</li></ol> <p>共享文件系统服务中有大量的共享驱动程序由不同的供应商创建。作为 Python 类，可以为<a href="https://docs.openstack.org/manila/yoga/admin/shared-file-systems-multi-backend.html#shared-file-systems-multi-backend" target="_blank" rel="noopener noreferrer">后端<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>设置每个共享驱动程序，并在后端运行以管理共享操作。</p> <p>最初，后端有两种驱动程序模式：</p> <ul><li><code>无共享服务器模式</code></li> <li><code>共享服务器模式</code></li></ul> <p>每个共享驱动程序都支持一种或两种可在文件中配置的可能后端模式。文件中的配置选项设置共享服务器模式或无共享服务器模式，并定义共享存储生命周期管理的驱动程序模式：<code>manila.conf driver_handles_share_servers manila.conf</code></p> <table><thead><tr><th style="text-align:left;">模式</th> <th style="text-align:left;">配置选项</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">无共享服务器</td> <td style="text-align:left;">driver_handles_share_servers = False</td> <td style="text-align:left;">管理员而不是共享驱动程序使用某些网络接口而不是共享服务器来管理裸机存储。</td></tr> <tr><td style="text-align:left;">共享服务器</td> <td style="text-align:left;">driver_handles_share_servers = True</td> <td style="text-align:left;">共享驱动程序创建共享服务器并管理或处理共享服务器生命周期。</td></tr></tbody></table> <h4 id="检查共享类型"><a href="#检查共享类型" class="header-anchor">#</a> 检查共享类型</h4> <p>检查存在的共享类型，运行：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-key default_share_type set snapshot_support=True </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila type-list </span>
+--------------------------------------+--------------------+------------+------------+--------------------------------------+-------------------------+--------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name               <span class="token operator">|</span> visibility <span class="token operator">|</span> is_default <span class="token operator">|</span> required_extra_specs                 <span class="token operator">|</span> optional_extra_specs    <span class="token operator">|</span> Description  <span class="token operator">|</span>
+--------------------------------------+--------------------+------------+------------+--------------------------------------+-------------------------+--------------+
<span class="token operator">|</span> 7b75f62e-7903-47f6-9a92-be8bcb36163d <span class="token operator">|</span> default_share_type <span class="token operator">|</span> public     <span class="token operator">|</span> YES        <span class="token operator">|</span> driver_handles_share_servers <span class="token builtin class-name">:</span> False <span class="token operator">|</span> snapshot_support <span class="token builtin class-name">:</span> True <span class="token operator">|</span> Default Type <span class="token operator">|</span>
+--------------------------------------+--------------------+------------+------------+--------------------------------------+-------------------------+--------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>创建具有共享类型、NFS 共享文件系统协议和大小为 1 GB 的私有共享：<code>my_type</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila create nfs 1 --name Share1 --description &quot;My share&quot; --share-type default_share_type </span>
+---------------------------------------+--------------------------------------+
<span class="token operator">|</span> Property                              <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+---------------------------------------+--------------------------------------+
<span class="token operator">|</span> status                                <span class="token operator">|</span> creating                             <span class="token operator">|</span>
<span class="token operator">|</span> share_type_name                       <span class="token operator">|</span> default_share_type                   <span class="token operator">|</span>
<span class="token operator">|</span> description                           <span class="token operator">|</span> My share                             <span class="token operator">|</span>
<span class="token operator">|</span> availability_zone                     <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_network_id                      <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_server_id                       <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_group_id                        <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">host</span>                                  <span class="token operator">|</span>                                      <span class="token operator">|</span>
<span class="token operator">|</span> revert_to_snapshot_support            <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> access_rules_status                   <span class="token operator">|</span> active                               <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_id                           <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> create_share_from_snapshot_support    <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> is_public                             <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> task_state                            <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_support                      <span class="token operator">|</span> True                                 <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                                    <span class="token operator">|</span> 3230a48c-1655-446b-b025-37db4c1b7bc5 <span class="token operator">|</span>
<span class="token operator">|</span> size                                  <span class="token operator">|</span> <span class="token number">1</span>                                    <span class="token operator">|</span>
<span class="token operator">|</span> source_share_group_snapshot_member_id <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> user_id                               <span class="token operator">|</span> b5c97eaf97684692936156ef49f60e23     <span class="token operator">|</span>
<span class="token operator">|</span> name                                  <span class="token operator">|</span> Share1                               <span class="token operator">|</span>
<span class="token operator">|</span> share_type                            <span class="token operator">|</span> 7b75f62e-7903-47f6-9a92-be8bcb36163d <span class="token operator">|</span>
<span class="token operator">|</span> has_replicas                          <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> replication_type                      <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> created_at                            <span class="token operator">|</span> <span class="token number">2022</span>-05-11T10:13:41.000000           <span class="token operator">|</span>
<span class="token operator">|</span> share_proto                           <span class="token operator">|</span> NFS                                  <span class="token operator">|</span>
<span class="token operator">|</span> mount_snapshot_support                <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> project_id                            <span class="token operator">|</span> 47924529caa440ffa432454f4cc2daa0     <span class="token operator">|</span>
<span class="token operator">|</span> metadata                              <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>                                   <span class="token operator">|</span>
+---------------------------------------+--------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>新共享应具有以下状态：<code>Share2</code> <code>available</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila show Share1 </span>
+---------------------------------------+------------------------------------------------------------------------------------+
<span class="token operator">|</span> Property                              <span class="token operator">|</span> Value                                                                              <span class="token operator">|</span>
+---------------------------------------+------------------------------------------------------------------------------------+
<span class="token operator">|</span> status                                <span class="token operator">|</span> available                                                                          <span class="token operator">|</span>
<span class="token operator">|</span> share_type_name                       <span class="token operator">|</span> default_share_type                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> description                           <span class="token operator">|</span> My share                                                                           <span class="token operator">|</span>
<span class="token operator">|</span> availability_zone                     <span class="token operator">|</span> nova                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> share_network_id                      <span class="token operator">|</span> None                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> export_locations                      <span class="token operator">|</span>                                                                                    <span class="token operator">|</span>
<span class="token operator">|</span>                                       <span class="token operator">|</span> path <span class="token operator">=</span> <span class="token number">172.16</span>.33.26:/var/lib/manila/mnt/share-add6cceb-8945-4be4-85de-1efd150f570c <span class="token operator">|</span>
<span class="token operator">|</span>                                       <span class="token operator">|</span> preferred <span class="token operator">=</span> False                                                                  <span class="token operator">|</span>
<span class="token operator">|</span>                                       <span class="token operator">|</span> is_admin_only <span class="token operator">=</span> False                                                              <span class="token operator">|</span>
<span class="token operator">|</span>                                       <span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">=</span> 9866e47e-5fd9-4d05-9545-01f17e7a8cf5                                          <span class="token operator">|</span>
<span class="token operator">|</span>                                       <span class="token operator">|</span> share_instance_id <span class="token operator">=</span> add6cceb-8945-4be4-85de-1efd150f570c                           <span class="token operator">|</span>
<span class="token operator">|</span> share_server_id                       <span class="token operator">|</span> None                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> share_group_id                        <span class="token operator">|</span> None                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">host</span>                                  <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool                                                        |</span>
<span class="token operator">|</span> revert_to_snapshot_support            <span class="token operator">|</span> False                                                                              <span class="token operator">|</span>
<span class="token operator">|</span> access_rules_status                   <span class="token operator">|</span> active                                                                             <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_id                           <span class="token operator">|</span> None                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> create_share_from_snapshot_support    <span class="token operator">|</span> False                                                                              <span class="token operator">|</span>
<span class="token operator">|</span> is_public                             <span class="token operator">|</span> False                                                                              <span class="token operator">|</span>
<span class="token operator">|</span> task_state                            <span class="token operator">|</span> None                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> snapshot_support                      <span class="token operator">|</span> True                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                                    <span class="token operator">|</span> 3230a48c-1655-446b-b025-37db4c1b7bc5                                               <span class="token operator">|</span>
<span class="token operator">|</span> size                                  <span class="token operator">|</span> <span class="token number">1</span>                                                                                  <span class="token operator">|</span>
<span class="token operator">|</span> source_share_group_snapshot_member_id <span class="token operator">|</span> None                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> user_id                               <span class="token operator">|</span> b5c97eaf97684692936156ef49f60e23                                                   <span class="token operator">|</span>
<span class="token operator">|</span> name                                  <span class="token operator">|</span> Share1                                                                             <span class="token operator">|</span>
<span class="token operator">|</span> share_type                            <span class="token operator">|</span> 7b75f62e-7903-47f6-9a92-be8bcb36163d                                               <span class="token operator">|</span>
<span class="token operator">|</span> has_replicas                          <span class="token operator">|</span> False                                                                              <span class="token operator">|</span>
<span class="token operator">|</span> replication_type                      <span class="token operator">|</span> None                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> created_at                            <span class="token operator">|</span> <span class="token number">2022</span>-05-11T10:13:41.000000                                                         <span class="token operator">|</span>
<span class="token operator">|</span> share_proto                           <span class="token operator">|</span> NFS                                                                                <span class="token operator">|</span>
<span class="token operator">|</span> mount_snapshot_support                <span class="token operator">|</span> False                                                                              <span class="token operator">|</span>
<span class="token operator">|</span> project_id                            <span class="token operator">|</span> 47924529caa440ffa432454f4cc2daa0                                                   <span class="token operator">|</span>
<span class="token operator">|</span> metadata                              <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>                                                                                 <span class="token operator">|</span>
+---------------------------------------+------------------------------------------------------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h4 id="更新共享"><a href="#更新共享" class="header-anchor">#</a> 更新共享</h4> <p>如果需要，请更新共享的所有项目的名称、描述或可见性级别：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila update Share2 --description &quot;My second share. Updated&quot; --is-public False</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila show Share2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="管理共享访问权限"><a href="#管理共享访问权限" class="header-anchor">#</a> 管理共享访问权限</h4> <p>共享文件系统服务允许授予或拒绝对指定共享的访问权限，并列出指定共享的权限。</p> <p>要授予或拒绝对共享的访问权限，请指定以下受支持的共享访问级别之一：</p> <ul><li><strong><code>rw：</code></strong> 读写 （RW） 访问权限。这是默认值。</li> <li><strong><code>ro：</code></strong> 只读 （RO） 访问。</li></ul> <p>您还必须指定以下受支持的身份验证方法之一：</p> <ul><li><strong><code>ip</code></strong>。 通过实例的 IP 地址对实例进行身份验证。有效格式为 或 。例如。<code>XX.XX.XX.XX、XX.XX.XX.XX/XX、0.0.0.0/0</code></li> <li><strong><code>用户</code></strong>。通过指定的用户或组名进行身份验证。有效值是可以包含一些特殊字符的字母数字字符串，长度为 4 到 32 个字符。</li> <li><strong><code>证书</code></strong>。通过 TLS 证书对实例进行身份验证。将 TLS 标识指定为标识密钥。有效值是证书公用名 （CN） 中长度不超过 64 个字符的任何字符串。字符串的含义取决于其解释。</li> <li><strong><code>头孢克斯</code></strong>。Ceph 认证系统。指定 Ceph 后端需要对共享访问进行身份验证和授权的 Ceph 身份验证 ID。有效值必须为非空，由 ASCII 可打印字符组成，并且不包含句点。</li></ul> <p>尝试在具有 IP 地址的节点上挂载具有导出路径的 NFS 共享：<code>172.16.33.26:/var/lib/manila/mnt/share-add6cceb-8945-4be4-85de-1efd150f570c</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># mount -v -t nfs 172.16.33.26:/var/lib/manila/mnt/share-add6cceb-8945-4be4-85de-1efd150f570c /mnt/</span>
mount.nfs: <span class="token function">timeout</span> <span class="token builtin class-name">set</span> <span class="token keyword">for</span> Wed May <span class="token number">11</span> <span class="token number">10</span>:17:51 <span class="token number">2022</span>
mount.nfs: trying text-based options <span class="token string">'vers=4.1,addr=172.16.33.26,clientaddr=172.16.33.26'</span>
mount.nfs: mount<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>: Permission denied
mount.nfs: trying text-based options <span class="token string">'vers=4.0,addr=172.16.33.26,clientaddr=172.16.33.26'</span>
mount.nfs: mount<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>: Permission denied
mount.nfs: trying text-based options <span class="token string">'addr=172.16.33.26'</span>
mount.nfs: prog <span class="token number">100003</span>, trying <span class="token assign-left variable">vers</span><span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">prot</span><span class="token operator">=</span><span class="token number">6</span>
mount.nfs: trying <span class="token number">172.16</span>.33.26 prog <span class="token number">100003</span> vers <span class="token number">3</span> prot TCP port <span class="token number">2049</span>
mount.nfs: prog <span class="token number">100005</span>, trying <span class="token assign-left variable">vers</span><span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">prot</span><span class="token operator">=</span><span class="token number">17</span>
mount.nfs: trying <span class="token number">172.16</span>.33.26 prog <span class="token number">100005</span> vers <span class="token number">3</span> prot UDP port <span class="token number">20048</span>
mount.nfs: mount<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>: Permission denied
mount.nfs: access denied by server <span class="token keyword">while</span> mounting <span class="token number">172.16</span>.33.26:/var/lib/manila/mnt/share-add6cceb-8945-4be4-85de-1efd150f570c
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>出现错误消息“权限被拒绝”，因此不允许在没有访问规则的情况下装载共享。允许使用访问类型和 IP 地址访问共享：<code>ip：172.16.33.26</code></p> <p>添加权限</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila access-allow Share1 ip 172.16.33.26 --access-level rw </span>
+--------------+--------------------------------------+
<span class="token operator">|</span> Property     <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+--------------+--------------------------------------+
<span class="token operator">|</span> access_key   <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> share_id     <span class="token operator">|</span> 3230a48c-1655-446b-b025-37db4c1b7bc5 <span class="token operator">|</span>
<span class="token operator">|</span> created_at   <span class="token operator">|</span> <span class="token number">2022</span>-05-11T10:18:05.000000           <span class="token operator">|</span>
<span class="token operator">|</span> updated_at   <span class="token operator">|</span> None                                 <span class="token operator">|</span>
<span class="token operator">|</span> access_type  <span class="token operator">|</span> <span class="token function">ip</span>                                   <span class="token operator">|</span>
<span class="token operator">|</span> access_to    <span class="token operator">|</span> <span class="token number">172.16</span>.33.26                         <span class="token operator">|</span>
<span class="token operator">|</span> access_level <span class="token operator">|</span> rw                                   <span class="token operator">|</span>
<span class="token operator">|</span> state        <span class="token operator">|</span> queued_to_apply                      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>           <span class="token operator">|</span> 726f7718-a98c-4709-8a24-684098d42731 <span class="token operator">|</span>
<span class="token operator">|</span> metadata     <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>                                   <span class="token operator">|</span>
+--------------+--------------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>尝试再次装载共享。这次它已成功挂载：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@compute mnt<span class="token punctuation">]</span><span class="token comment"># mount -v -t nfs 172.16.33.26:/var/lib/manila/mnt/share-add6cceb-8945-4be4-85de-1efd150f570c /mnt/</span>
mount.nfs: <span class="token function">timeout</span> <span class="token builtin class-name">set</span> <span class="token keyword">for</span> Wed May <span class="token number">11</span> <span class="token number">10</span>:20:10 <span class="token number">2022</span>
mount.nfs: trying text-based options <span class="token string">'vers=4.1,addr=172.16.33.26,clientaddr=172.16.33.26'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当前已经允许了该ip都读写的权限，尝试挂载之后创建文件夹：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># cd /mnt/</span>
<span class="token punctuation">[</span>root@compute mnt<span class="token punctuation">]</span><span class="token comment"># ls</span>
lost+found
<span class="token punctuation">[</span>root@compute mnt<span class="token punctuation">]</span><span class="token comment"># touch myfile.txt</span>
<span class="token punctuation">[</span>root@compute mnt<span class="token punctuation">]</span><span class="token comment"># ls </span>
lost+found  myfile.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="删除和强制删除共享"><a href="#删除和强制删除共享" class="header-anchor">#</a> 删除和强制删除共享</h4> <p>您也可以强制删除共享。在过渡状态下不能删除共享。强制删除会删除处于任何状态的对象。使用该文件将此操作的权限授予其他角色</p> <blockquote><p>提示</p> <p>配置文件可以从不同位置使用。默认情况下，该路径是预期路径之一。<code>policy.yaml``/etc/manila/policy.yaml</code></p></blockquote> <p>使用 <strong><code>manila delete &lt;share_name_or_ID&gt;</code></strong> 命令删除指定的共享：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila delete  demo-share1    </span>

<span class="token comment"># 如果您尝试使用软删除功能删除处于某个过渡状态的共享，则会收到错误：</span>
Delete <span class="token keyword">for</span> share demo-share1 failed: Invalid share: Share status must be one of <span class="token punctuation">(</span><span class="token string">'available'</span>, <span class="token string">'error'</span>, <span class="token string">'inactive'</span><span class="token punctuation">)</span>. <span class="token punctuation">(</span>HTTP <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>Request-ID: req-e749651b-0ea3-4cbd-bf6a-193338a1bdb7<span class="token punctuation">)</span>
ERROR: Unable to delete any of the specified shares.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>共享不能在过渡状态下删除，这就是错误出现的原因。<code>python-manilaclient</code></p> <p>打印所有项目的所有共享列表：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila list --all-tenants</span>
+--------------------------------------+--------------------+------+-------------+----------------+-----------+--------------------+-----------------------------+-------------------+----------------------------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name               <span class="token operator">|</span> Size <span class="token operator">|</span> Share Proto <span class="token operator">|</span> Status         <span class="token operator">|</span> Is Public <span class="token operator">|</span> Share Type Name    <span class="token operator">|</span> Host                        <span class="token operator">|</span> Availability Zone <span class="token operator">|</span> Project ID                       <span class="token operator">|</span>
+--------------------------------------+--------------------+------+-------------+----------------+-----------+--------------------+-----------------------------+-------------------+----------------------------------+
<span class="token operator">|</span> ccb98a64-ed6b-41aa-81be-5b3745a92f45 <span class="token operator">|</span> demo-share1        <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> NFS         <span class="token operator">|</span> error_deleting <span class="token operator">|</span> False     <span class="token operator">|</span> default_share_type <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool | nova              | 47924529caa440ffa432454f4cc2daa0 |</span>
<span class="token operator">|</span> 3230a48c-1655-446b-b025-37db4c1b7bc5 <span class="token operator">|</span> Share1             <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> NFS         <span class="token operator">|</span> available      <span class="token operator">|</span> False     <span class="token operator">|</span> default_share_type <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool | nova              | 47924529caa440ffa432454f4cc2daa0 |</span>
<span class="token operator">|</span> 8e722534-f92d-42fa-968c-817555ad462c <span class="token operator">|</span> test_group_share_2 <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> NFS         <span class="token operator">|</span> available      <span class="token operator">|</span> False     <span class="token operator">|</span> default_share_type <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool | nova              | 47924529caa440ffa432454f4cc2daa0 |</span>
<span class="token operator">|</span> 90f2b422-4624-4986-a5f0-1c95053c40d3 <span class="token operator">|</span> test_group_share_1 <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> NFS         <span class="token operator">|</span> available      <span class="token operator">|</span> False     <span class="token operator">|</span> default_share_type <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool | nova              | 47924529caa440ffa432454f4cc2daa0 |</span>
+--------------------------------------+--------------------+------+-------------+----------------+-----------+--------------------+-----------------------------+-------------------+----------------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>强制删除 Share2 并检查共享列表中是否不存在，运行：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila force-delete demo-share1 </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila list </span>
+--------------------------------------+--------------------+------+-------------+-----------+-----------+--------------------+-----------------------------+-------------------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name               <span class="token operator">|</span> Size <span class="token operator">|</span> Share Proto <span class="token operator">|</span> Status    <span class="token operator">|</span> Is Public <span class="token operator">|</span> Share Type Name    <span class="token operator">|</span> Host                        <span class="token operator">|</span> Availability Zone <span class="token operator">|</span>
+--------------------------------------+--------------------+------+-------------+-----------+-----------+--------------------+-----------------------------+-------------------+
<span class="token operator">|</span> 3230a48c-1655-446b-b025-37db4c1b7bc5 <span class="token operator">|</span> Share1             <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> NFS         <span class="token operator">|</span> available <span class="token operator">|</span> False     <span class="token operator">|</span> default_share_type <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool | nova              |</span>
<span class="token operator">|</span> 8e722534-f92d-42fa-968c-817555ad462c <span class="token operator">|</span> test_group_share_2 <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> NFS         <span class="token operator">|</span> available <span class="token operator">|</span> False     <span class="token operator">|</span> default_share_type <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool | nova              |</span>
<span class="token operator">|</span> 90f2b422-4624-4986-a5f0-1c95053c40d3 <span class="token operator">|</span> test_group_share_1 <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> NFS         <span class="token operator">|</span> available <span class="token operator">|</span> False     <span class="token operator">|</span> default_share_type <span class="token operator">|</span> compute@lvm<span class="token comment">#lvm-single-pool | nova              |</span>
+--------------------------------------+--------------------+------+-------------+-----------+-----------+--------------------+-----------------------------+-------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="调整共享大小"><a href="#调整共享大小" class="header-anchor">#</a> 调整共享大小</h4> <p>若要更改文件共享大小，请使用  <strong><code>manila extend</code></strong>  命令和  <strong><code>manila shrink</code></strong>  命令。对于大多数驾驶员来说，这是安全的操作。如果要确保数据安全，可以通过创建共享快照来备份共享。</p> <p>在扩展时，共享具有状态。这意味着已成功发出增加共享大小的请求。<code>extending</code></p> <p>要扩展共享并检查结果，请运行：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila extend test_group_share_1 2 </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila show  test_group_share_1       </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在收缩时，份额具有地位。这意味着已成功发出减小共享大小请求。要缩小共享并检查结果，请运行：<code>shrinking</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila shrink test_group_share_1  1</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># manila show test_group_share_1 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/isicman/Vue/edit/master/docs/《OpenStack》学习笔记/02.高级服务/02.Manila.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/Vue/tags/?tag=OpenStack" title="标签">#OpenStack</a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/Vue/pages/66cb4e/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Trove组件</div></a> <a href="/Vue/pages/3511d3/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">CloudKitty组件</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Vue/pages/66cb4e/" class="prev">Trove组件</a></span> <span class="next"><a href="/Vue/pages/3511d3/">CloudKitty组件</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/Vue/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/Vue/pages/ace346/"><div>
            SpringBoot配置文件
            <!----></div></a> <span class="date">07-27</span></dt></dl><dl><dd>02</dd> <dt><a href="/Vue/pages/69a126/"><div>
            整合Junit和Mybatis
            <!----></div></a> <span class="date">07-27</span></dt></dl><dl><dd>03</dd> <dt><a href="/Vue/pages/3e651a/"><div>
            SpringBoot快速入门
            <!----></div></a> <span class="date">07-27</span></dt></dl> <dl><dd></dd> <dt><a href="/Vue/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2022
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><div></div></div></div>
    <script src="/Vue/assets/js/app.2f1a3b6e.js" defer></script><script src="/Vue/assets/js/2.3b495877.js" defer></script><script src="/Vue/assets/js/3.0279f92a.js" defer></script><script src="/Vue/assets/js/214.226476f0.js" defer></script><script src="/Vue/assets/js/4.cb69b0f7.js" defer></script>
  </body>
</html>
